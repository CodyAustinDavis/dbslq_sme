{"datasets":[{"name":"021e1eac","displayName":"Access History","query":"WITH parsed_tags AS (\n        SELECT *\n        FROM main.access_entitlements_advisor.uc_tags t \n        WHERE (:tag_name_csv = 'all')\n        OR (lower(t.tag_name) IN (SELECT value \n                                FROM LATERAL VIEW explode(split(lower(:tag_name_csv), ',')) AS value))\n),\n\n\nclean_tags AS (\nSELECT \ntp.*,\ndate_diff(DAY, last_access_date, getdate()::date) AS day_since_last_access,\n-- Catalog Level Tags\n        (SELECT COALESCE(collect_set(tag_name), ARRAY()) FROM parsed_tags tt\n        WHERE tt.entity_type = 'catalog'\n        AND tp.entity_name LIKE(tt.entity_name + '%')\n        ) AS matched_catalog_level_tags,\n-- Schema Level Tags\n        (SELECT COALESCE(collect_set(tag_name), ARRAY()) FROM parsed_tags tt\n        WHERE tt.entity_type = 'schema'\n        AND tp.entity_name LIKE(tt.entity_name + '%')\n        ) AS matched_schema_level_tags,\n-- Table Level Tags\n        (SELECT COALESCE(collect_set(tag_name), ARRAY()) FROM parsed_tags tt\n        WHERE tt.entity_type = 'table'\n        AND tp.entity_name = tt.entity_name\n        ) AS matched_table_level_tags,\n-- Column Level Tags\n        (SELECT COALESCE(collect_set(tag_name), ARRAY()) FROM parsed_tags tt\n        WHERE tt.entity_type = 'column'\n        AND tt.entity_name ILIKE (tp.entity_name +'%')\n        ) AS matched_column_level_tags\nFROM main.access_entitlements_advisor.table_column_access_history tp\nWHERE (last_access_date BETWEEN :last_access_start::timestamp AND :last_access_end::timestamp)\n)\n\nSELECT \n*,\nsplit(:group_name_csv, ',') AS search_groups_list,\n(SELECT collect_set(group_name)  \n            FROM main.access_entitlements_advisor.user_group_crosswalk ug\n            WHERE ug.user_name = ct.accessed_by\n) AS active_groups,\narray_intersect(search_groups_list, active_groups) AS matched_groups,\nCASE WHEN size(matched_groups) > 0 THEN 'In Group Search List' ELSE 'NO MATCH' END AS IsMatchedToGroupSearch,\nCASE WHEN size(matched_groups) > 0 THEN 1 ELSE 0 END AS MatchedAccessHistoryCount,\nCASE WHEN size(matched_groups) = 0 THEN 1 ELSE 0 END AS NotMatchedAccessHistoryCount,\narray_distinct(concat(COALESCE(matched_catalog_level_tags, ARRAY()), COALESCE(matched_schema_level_tags, ARRAY()), COALESCE(matched_table_level_tags, ARRAY()), COALESCE(matched_column_level_tags, ARRAY()))) AS all_matched_tags\nFROM clean_tags AS ct\nWHERE \n(\n:tag_name_csv = 'all'\nOR size(matched_table_level_tags) > 0\nOR size(matched_column_level_tags) > 0\nOR size(matched_schema_level_tags) > 0\nOR size(matched_catalog_level_tags) > 0\n)\n","parameters":[{"displayName":"last_access_start","keyword":"last_access_start","dataType":"DATETIME","defaultSelection":{"values":{"dataType":"DATETIME","values":[{"value":"2024-09-03T10:30:14.000"}]}}},{"displayName":"last_access_end","keyword":"last_access_end","dataType":"DATETIME","defaultSelection":{"values":{"dataType":"DATETIME","values":[{"value":"now-10s/s"}]}}},{"displayName":"tag_name_csv","keyword":"tag_name_csv","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"pii"}]}}},{"displayName":"group_name_csv","keyword":"group_name_csv","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"admins"}]}}}]}],"pages":[{"name":"b911882e","displayName":"New Page","layout":[{"widget":{"name":"fb236ac2","queries":[{"name":"dashboards/01ef7b63a7431b25beaa057249ac1d3d/datasets/01ef7b63ac8213f4a9d303e106a075da_access_data_entity_type","query":{"datasetName":"021e1eac","fields":[{"name":"access_data_entity_type","expression":"`access_data_entity_type`"},{"name":"access_data_entity_type_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"fieldName":"access_data_entity_type","displayName":"access_data_entity_type","queryName":"dashboards/01ef7b63a7431b25beaa057249ac1d3d/datasets/01ef7b63ac8213f4a9d303e106a075da_access_data_entity_type"}]},"frame":{"showTitle":true,"title":"Entity Type"},"disallowAll":false}},"position":{"x":0,"y":7,"width":2,"height":1}},{"widget":{"name":"19fccf6c","queries":[{"name":"dashboards/01ef7b63a7431b25beaa057249ac1d3d/datasets/01ef7b63ac8213f4a9d303e106a075da_catalog_name","query":{"datasetName":"021e1eac","fields":[{"name":"catalog_name","expression":"`catalog_name`"},{"name":"catalog_name_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-multi-select","encodings":{"fields":[{"fieldName":"catalog_name","displayName":"catalog_name","queryName":"dashboards/01ef7b63a7431b25beaa057249ac1d3d/datasets/01ef7b63ac8213f4a9d303e106a075da_catalog_name"}]},"frame":{"showTitle":true,"title":"Catalog"}}},"position":{"x":2,"y":7,"width":2,"height":1}},{"widget":{"name":"b107e399","queries":[{"name":"dashboards/01ef7b63a7431b25beaa057249ac1d3d/datasets/01ef7b63ac8213f4a9d303e106a075da_schema_name","query":{"datasetName":"021e1eac","fields":[{"name":"schema_name","expression":"`schema_name`"},{"name":"schema_name_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-multi-select","encodings":{"fields":[{"fieldName":"schema_name","displayName":"schema_name","queryName":"dashboards/01ef7b63a7431b25beaa057249ac1d3d/datasets/01ef7b63ac8213f4a9d303e106a075da_schema_name"}]},"frame":{"showTitle":true,"title":"Schema"}}},"position":{"x":4,"y":7,"width":2,"height":1}},{"widget":{"name":"20db2f36","queries":[{"name":"dashboards/01ef7b63a7431b25beaa057249ac1d3d/datasets/01ef7b63ac8213f4a9d303e106a075da_entity_name","query":{"datasetName":"021e1eac","fields":[{"name":"entity_name","expression":"`entity_name`"},{"name":"entity_name_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-multi-select","encodings":{"fields":[{"fieldName":"entity_name","displayName":"entity_name","queryName":"dashboards/01ef7b63a7431b25beaa057249ac1d3d/datasets/01ef7b63ac8213f4a9d303e106a075da_entity_name"}]},"frame":{"showTitle":true,"title":"Entity Name"}}},"position":{"x":0,"y":8,"width":2,"height":2}},{"widget":{"name":"eb57a21c","queries":[{"name":"parameter_dashboards/01ef7b63a7431b25beaa057249ac1d3d/datasets/01ef7b63ac8213f4a9d303e106a075da_last_access_start","query":{"datasetName":"021e1eac","parameters":[{"name":"last_access_start","keyword":"last_access_start"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-date-picker","encodings":{"fields":[{"parameterName":"last_access_start","queryName":"parameter_dashboards/01ef7b63a7431b25beaa057249ac1d3d/datasets/01ef7b63ac8213f4a9d303e106a075da_last_access_start"}]},"frame":{"showTitle":true,"title":"Latest Access Start"}}},"position":{"x":2,"y":8,"width":1,"height":2}},{"widget":{"name":"3047689b","queries":[{"name":"parameter_dashboards/01ef7b63a7431b25beaa057249ac1d3d/datasets/01ef7b63ac8213f4a9d303e106a075da_last_access_end","query":{"datasetName":"021e1eac","parameters":[{"name":"last_access_end","keyword":"last_access_end"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-date-picker","encodings":{"fields":[{"parameterName":"last_access_end","queryName":"parameter_dashboards/01ef7b63a7431b25beaa057249ac1d3d/datasets/01ef7b63ac8213f4a9d303e106a075da_last_access_end"}]},"frame":{"showTitle":true,"title":"Latest Access End"}}},"position":{"x":3,"y":8,"width":1,"height":2}},{"widget":{"name":"a980fd90","queries":[{"name":"dashboards/01ef7b63a7431b25beaa057249ac1d3d/datasets/01ef7b63ac8213f4a9d303e106a075da_access_event_type","query":{"datasetName":"021e1eac","fields":[{"name":"access_event_type","expression":"`access_event_type`"},{"name":"access_event_type_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-multi-select","encodings":{"fields":[{"fieldName":"access_event_type","displayName":"access_event_type","queryName":"dashboards/01ef7b63a7431b25beaa057249ac1d3d/datasets/01ef7b63ac8213f4a9d303e106a075da_access_event_type"}]},"frame":{"showTitle":true,"title":"Access Type"}}},"position":{"x":0,"y":10,"width":2,"height":1}},{"widget":{"name":"8deae63d","queries":[{"name":"main_query","query":{"datasetName":"021e1eac","fields":[{"name":"sum(access_count)","expression":"SUM(`access_count`)"},{"name":"access_event_type","expression":"`access_event_type`"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"pie","encodings":{"angle":{"fieldName":"sum(access_count)","scale":{"type":"quantitative"},"displayName":"Accesses"},"color":{"fieldName":"access_event_type","scale":{"type":"categorical","mappings":[{"value":"READ","color":"#00A972"},{"value":"WRITE","color":"#AB4057"}]},"displayName":"access_event_type"},"label":{"show":true}},"frame":{"showTitle":true,"title":"Access Frequency By Type"}}},"position":{"x":0,"y":11,"width":2,"height":6}},{"widget":{"name":"7f2dbbb0","queries":[{"name":"dashboards/01ef7b63a7431b25beaa057249ac1d3d/datasets/01ef7b63ac8213f4a9d303e106a075da_day_since_last_access","query":{"datasetName":"021e1eac","fields":[{"name":"min(day_since_last_access)","expression":"MIN(`day_since_last_access`)"},{"name":"max(day_since_last_access)","expression":"MAX(`day_since_last_access`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"range-slider","encodings":{"fields":[{"fieldName":"day_since_last_access","displayName":"day_since_last_access","queryName":"dashboards/01ef7b63a7431b25beaa057249ac1d3d/datasets/01ef7b63ac8213f4a9d303e106a075da_day_since_last_access"}]},"frame":{"showTitle":true,"title":"Days Since Last Access"}}},"position":{"x":4,"y":8,"width":2,"height":2}},{"widget":{"name":"417624ae","queries":[{"name":"main_query","query":{"datasetName":"021e1eac","fields":[{"name":"access_event_type","expression":"`access_event_type`"},{"name":"sum(access_count)","expression":"SUM(`access_count`)"},{"name":"entity_name","expression":"`entity_name`"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"sum(access_count)","scale":{"type":"quantitative"},"displayName":"Access Count"},"y":{"fieldName":"entity_name","scale":{"type":"categorical","sort":{"by":"x-reversed"}},"displayName":"entity_name"},"color":{"fieldName":"access_event_type","scale":{"type":"categorical","mappings":[{"value":"READ","color":"#00A972"},{"value":"WRITE","color":"#AB4057"}]},"displayName":"access_event_type"},"label":{"show":false}},"frame":{"showTitle":true,"title":"Access Events By Data Asset Entity","showDescription":true,"description":"\"What data assets (table/column) are being read/written to the most?\""}}},"position":{"x":0,"y":37,"width":3,"height":14}},{"widget":{"name":"355d49f5","queries":[{"name":"main_query","query":{"datasetName":"021e1eac","fields":[{"name":"access_event_type","expression":"`access_event_type`"},{"name":"countdistinct(accessed_by)","expression":"COUNT(DISTINCT `accessed_by`)"},{"name":"entity_name","expression":"`entity_name`"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"countdistinct(accessed_by)","scale":{"type":"quantitative"},"displayName":"User Count"},"y":{"fieldName":"entity_name","scale":{"type":"categorical","sort":{"by":"x-reversed"}},"displayName":"entity_name"},"color":{"fieldName":"access_event_type","scale":{"type":"categorical","mappings":[{"value":"READ","color":"#00A972"},{"value":"WRITE","color":"#AB4057"}]},"displayName":"access_event_type"},"label":{"show":false}},"frame":{"showTitle":true,"title":"Users Accessed By Data Asset Entity","showDescription":true,"description":"\"What datasets have the most users reading/writing to it?"}}},"position":{"x":4,"y":27,"width":2,"height":10}},{"widget":{"name":"8bbf066b","queries":[{"name":"main_query","query":{"datasetName":"021e1eac","fields":[{"name":"access_event_type","expression":"`access_event_type`"},{"name":"sum(access_count)","expression":"SUM(`access_count`)"},{"name":"accessed_by","expression":"`accessed_by`"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"sum(access_count)","scale":{"type":"quantitative"},"displayName":"Access Count"},"y":{"fieldName":"accessed_by","scale":{"type":"categorical","sort":{"by":"x-reversed"}},"displayName":"accessed_by"},"color":{"fieldName":"access_event_type","scale":{"type":"categorical","mappings":[{"value":"READ","color":"#00A972"},{"value":"WRITE","color":"#AB4057"}]},"displayName":"access_event_type"},"label":{"show":false}},"frame":{"showTitle":true,"title":"Access Events By User","showDescription":true,"description":"\"What users are reading/writing data the most?\""}}},"position":{"x":4,"y":17,"width":2,"height":10}},{"widget":{"name":"8e3ae81d","queries":[{"name":"dashboards/01ef7b63a7431b25beaa057249ac1d3d/datasets/01ef7b63ac8213f4a9d303e106a075da_accessed_by","query":{"datasetName":"021e1eac","fields":[{"name":"accessed_by","expression":"`accessed_by`"},{"name":"accessed_by_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-multi-select","encodings":{"fields":[{"fieldName":"accessed_by","displayName":"accessed_by","queryName":"dashboards/01ef7b63a7431b25beaa057249ac1d3d/datasets/01ef7b63ac8213f4a9d303e106a075da_accessed_by"}]},"frame":{"showTitle":true,"title":"User"}}},"position":{"x":2,"y":10,"width":2,"height":1}},{"widget":{"name":"e30a0ac7","queries":[{"name":"parameter_dashboards/01ef7b63a7431b25beaa057249ac1d3d/datasets/01ef7b63ac8213f4a9d303e106a075da_tag_name_csv","query":{"datasetName":"021e1eac","parameters":[{"name":"tag_name_csv","keyword":"tag_name_csv"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"parameterName":"tag_name_csv","queryName":"parameter_dashboards/01ef7b63a7431b25beaa057249ac1d3d/datasets/01ef7b63ac8213f4a9d303e106a075da_tag_name_csv"}]},"frame":{"showTitle":true,"title":"Tag (csv)"}}},"position":{"x":4,"y":10,"width":2,"height":1}},{"widget":{"name":"0fe3cfe0","queries":[{"name":"main_query","query":{"datasetName":"021e1eac","fields":[{"name":"sum(access_count)","expression":"SUM(`access_count`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"sum(access_count)","displayName":"Sum of access_count"}},"frame":{"showTitle":true,"title":"Access Event Count"}}},"position":{"x":2,"y":11,"width":1,"height":3}},{"widget":{"name":"13d83858","queries":[{"name":"main_query","query":{"datasetName":"021e1eac","fields":[{"name":"countdistinct(accessed_by)","expression":"COUNT(DISTINCT `accessed_by`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"countdistinct(accessed_by)","displayName":"Count of Unique accessed_by"}},"frame":{"showTitle":true,"title":"Accessed User Count"}}},"position":{"x":3,"y":11,"width":1,"height":3}},{"widget":{"name":"e0565a18","queries":[{"name":"main_query","query":{"datasetName":"021e1eac","fields":[{"name":"countdistinct(entity_name)","expression":"COUNT(DISTINCT `entity_name`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"countdistinct(entity_name)","displayName":"Count of Unique entity_name"}},"frame":{"showTitle":true,"title":"Accessed Data Asset Entity Count"}}},"position":{"x":4,"y":11,"width":2,"height":3}},{"widget":{"name":"65802047","queries":[{"name":"main_query","query":{"datasetName":"021e1eac","fields":[{"name":"countdistinct(catalog_name)","expression":"COUNT(DISTINCT `catalog_name`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"countdistinct(catalog_name)","displayName":"Count of Unique catalog_name"}},"frame":{"showTitle":true,"title":"Catalog Count"}}},"position":{"x":2,"y":14,"width":1,"height":3}},{"widget":{"name":"9b3b4c2f","queries":[{"name":"main_query","query":{"datasetName":"021e1eac","fields":[{"name":"countdistinct(schema_name)","expression":"COUNT(DISTINCT `schema_name`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"countdistinct(schema_name)","displayName":"Count of Unique schema_name"}},"frame":{"showTitle":true,"title":"Schema Count"}}},"position":{"x":3,"y":14,"width":1,"height":3}},{"widget":{"name":"8a0d35b1","queries":[{"name":"main_query","query":{"datasetName":"021e1eac","fields":[{"name":"min(day_since_last_access)","expression":"MIN(`day_since_last_access`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"min(day_since_last_access)","displayName":"Minimum day_since_last_access"}},"frame":{"showTitle":true,"title":"Number of Days Since Most Recent Access"}}},"position":{"x":4,"y":14,"width":2,"height":3}},{"widget":{"name":"a3fb792f","textbox_spec":"# Data Asset Access History Audit Advisor (tables/columns/views)\n\n-----\nDashboard to show \"who accessed table/columns X? and when? (by read or write access)\""},"position":{"x":0,"y":0,"width":6,"height":2}},{"widget":{"name":"bd91a63a","queries":[{"name":"main_query","query":{"datasetName":"021e1eac","fields":[{"name":"access_event_type","expression":"`access_event_type`"},{"name":"sum(access_count)","expression":"SUM(`access_count`)"},{"name":"catalog_name","expression":"`catalog_name`"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"sum(access_count)","scale":{"type":"quantitative"},"displayName":"Access Count"},"y":{"fieldName":"catalog_name","scale":{"type":"categorical","sort":{"by":"x-reversed"}},"displayName":"catalog_name"},"color":{"fieldName":"access_event_type","scale":{"type":"categorical","mappings":[{"value":"READ","color":"#00A972"},{"value":"WRITE","color":"#AB4057"}]},"displayName":"access_event_type"},"label":{"show":false}},"frame":{"showTitle":true,"title":"Access Events Catalog","showDescription":true,"description":"\"What catalogs are being read/written to the most?\""}}},"position":{"x":0,"y":17,"width":2,"height":10}},{"widget":{"name":"2934bef0","queries":[{"name":"main_query","query":{"datasetName":"021e1eac","fields":[{"name":"access_event_type","expression":"`access_event_type`"},{"name":"sum(access_count)","expression":"SUM(`access_count`)"},{"name":"schema_name","expression":"`schema_name`"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"sum(access_count)","scale":{"type":"quantitative"},"displayName":"Access Count"},"y":{"fieldName":"schema_name","scale":{"type":"categorical","sort":{"by":"x-reversed"}},"displayName":"schema_name"},"color":{"fieldName":"access_event_type","scale":{"type":"categorical","mappings":[{"value":"READ","color":"#00A972"},{"value":"WRITE","color":"#AB4057"}]},"displayName":"access_event_type"},"label":{"show":false}},"frame":{"showTitle":true,"title":"Access Events Schema","showDescription":true,"description":"\"What schemas are being read/written to the most?\""}}},"position":{"x":2,"y":17,"width":2,"height":10}},{"widget":{"name":"9b835acc","queries":[{"name":"main_query","query":{"datasetName":"021e1eac","fields":[{"name":"access_event_type","expression":"`access_event_type`"},{"name":"countdistinct(accessed_by)","expression":"COUNT(DISTINCT `accessed_by`)"},{"name":"catalog_name","expression":"`catalog_name`"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"countdistinct(accessed_by)","scale":{"type":"quantitative"},"displayName":"User Count"},"y":{"fieldName":"catalog_name","scale":{"type":"categorical","sort":{"by":"x-reversed"}},"displayName":"catalog_name"},"color":{"fieldName":"access_event_type","scale":{"type":"categorical","mappings":[{"value":"READ","color":"#00A972"},{"value":"WRITE","color":"#AB4057"}]},"displayName":"access_event_type"},"label":{"show":false}},"frame":{"showTitle":true,"title":"Users Using Catalog","showDescription":true,"description":"\"What catalogs have the most number of users reading/writing?\""}}},"position":{"x":0,"y":27,"width":2,"height":10}},{"widget":{"name":"5dac06b1","queries":[{"name":"main_query","query":{"datasetName":"021e1eac","fields":[{"name":"access_event_type","expression":"`access_event_type`"},{"name":"countdistinct(accessed_by)","expression":"COUNT(DISTINCT `accessed_by`)"},{"name":"schema_name","expression":"`schema_name`"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"countdistinct(accessed_by)","scale":{"type":"quantitative"},"displayName":"User Count"},"y":{"fieldName":"schema_name","scale":{"type":"categorical","sort":{"by":"x-reversed"}},"displayName":"schema_name"},"color":{"fieldName":"access_event_type","scale":{"type":"categorical","mappings":[{"value":"READ","color":"#00A972"},{"value":"WRITE","color":"#AB4057"}]},"displayName":"access_event_type"},"label":{"show":false}},"frame":{"showTitle":true,"title":"Users Using Schema","showDescription":true,"description":"\"What schemas have the most number of users reading/writing?\""}}},"position":{"x":2,"y":27,"width":2,"height":10}},{"widget":{"name":"ffdb8834","queries":[{"name":"main_query","query":{"datasetName":"021e1eac","fields":[{"name":"access_event_type","expression":"`access_event_type`"},{"name":"sum(access_count)","expression":"SUM(`access_count`)"},{"name":"all_matched_tags","expression":"`all_matched_tags`"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"sum(access_count)","scale":{"type":"quantitative"},"displayName":"Access Count"},"y":{"fieldName":"all_matched_tags","scale":{"type":"categorical"},"displayName":"all_matched_tags"},"color":{"fieldName":"access_event_type","scale":{"type":"categorical","mappings":[{"value":"READ","color":"#00A972"},{"value":"WRITE","color":"#AB4057"}]},"displayName":"access_event_type"},"label":{"show":false}},"frame":{"showTitle":true,"title":"Access Events By Matched Tag Set","showDescription":true,"description":"\"What data assets (table/column) with tag sets are being read/written to the most?\""}}},"position":{"x":3,"y":37,"width":3,"height":7}},{"widget":{"name":"f48ff233","queries":[{"name":"main_query","query":{"datasetName":"021e1eac","fields":[{"name":"access_event_type","expression":"`access_event_type`"},{"name":"countdistinct(accessed_by)","expression":"COUNT(DISTINCT `accessed_by`)"},{"name":"all_matched_tags","expression":"`all_matched_tags`"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"countdistinct(accessed_by)","scale":{"type":"quantitative"},"displayName":"User Count"},"y":{"fieldName":"all_matched_tags","scale":{"type":"categorical"},"displayName":"all_matched_tags"},"color":{"fieldName":"access_event_type","scale":{"type":"categorical","mappings":[{"value":"READ","color":"#00A972"},{"value":"WRITE","color":"#AB4057"}]},"displayName":"access_event_type"},"label":{"show":false}},"frame":{"showTitle":true,"title":"Users Accessed By Matched Tag Set","showDescription":true,"description":"\"What data assets (table/column) with tag sets have the most users reading/writing to them?\""}}},"position":{"x":3,"y":44,"width":3,"height":7}},{"widget":{"name":"80c064cc","queries":[{"name":"main_query","query":{"datasetName":"021e1eac","fields":[{"name":"entity_name","expression":"`entity_name`"},{"name":"access_event_type","expression":"`access_event_type`"},{"name":"accessed_by","expression":"`accessed_by`"},{"name":"day_since_last_access","expression":"`day_since_last_access`"},{"name":"access_data_asset_type","expression":"`access_data_asset_type`"},{"name":"access_data_entity_type","expression":"`access_data_entity_type`"},{"name":"access_count","expression":"`access_count`"},{"name":"first_access_date","expression":"`first_access_date`"},{"name":"last_access_date","expression":"`last_access_date`"},{"name":"catalog_name","expression":"`catalog_name`"},{"name":"schema_name","expression":"`schema_name`"},{"name":"all_matched_tags","expression":"`all_matched_tags`"},{"name":"search_groups_list","expression":"`search_groups_list`"},{"name":"active_groups","expression":"`active_groups`"},{"name":"matched_groups","expression":"`matched_groups`"},{"name":"IsMatchedToGroupSearch","expression":"`IsMatchedToGroupSearch`"}],"disaggregated":true}}],"spec":{"version":1,"widgetType":"table","encodings":{"columns":[{"fieldName":"entity_name","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":2,"title":"entity_name","allowSearch":true,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"cellFormat":{"default":{"foregroundColor":"#356AFF"},"rules":[{"if":{"column":"entity_name","fn":"=","literal":""},"value":{"foregroundColor":null}}]},"displayName":"entity_name"},{"fieldName":"access_event_type","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":3,"title":"access_event_type","allowSearch":true,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"cellFormat":{"default":{"foregroundColor":null},"rules":[{"if":{"column":"access_event_type","fn":"=","literal":"WRITE"},"value":{"foregroundColor":"#E92828"}},{"if":{"column":"access_event_type","fn":"=","literal":"READ"},"value":{"foregroundColor":"#8CFFB4"}}]},"displayName":"access_event_type"},{"fieldName":"accessed_by","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":4,"title":"accessed_by","allowSearch":true,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"cellFormat":{"default":{"foregroundColor":"#799CFF"},"rules":[]},"displayName":"accessed_by"},{"fieldName":"day_since_last_access","numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"integer","displayAs":"number","visible":true,"order":6,"title":"day_since_last_access","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"day_since_last_access"},{"fieldName":"access_data_asset_type","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":7,"title":"access_data_asset_type","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"access_data_asset_type"},{"fieldName":"access_data_entity_type","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":8,"title":"access_data_entity_type","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"access_data_entity_type"},{"fieldName":"access_count","numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"integer","displayAs":"number","visible":true,"order":9,"title":"access_count","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"access_count"},{"fieldName":"first_access_date","dateTimeFormat":"YYYY-MM-DD","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"date","displayAs":"datetime","visible":true,"order":10,"title":"first_access_date","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"first_access_date"},{"fieldName":"last_access_date","dateTimeFormat":"YYYY-MM-DD","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"date","displayAs":"datetime","visible":true,"order":11,"title":"last_access_date","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"last_access_date"},{"fieldName":"catalog_name","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":12,"title":"catalog_name","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"catalog_name"},{"fieldName":"schema_name","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":13,"title":"schema_name","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"schema_name"},{"fieldName":"all_matched_tags","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"complex","displayAs":"json","visible":true,"order":15,"title":"all_matched_tags","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"all_matched_tags"},{"fieldName":"search_groups_list","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"complex","displayAs":"json","visible":true,"order":20,"title":"search_groups_list","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"search_groups_list"},{"fieldName":"active_groups","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"complex","displayAs":"json","visible":true,"order":21,"title":"active_groups","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"active_groups"},{"fieldName":"matched_groups","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"complex","displayAs":"json","visible":true,"order":22,"title":"matched_groups","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"matched_groups"},{"fieldName":"IsMatchedToGroupSearch","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":23,"title":"IsMatchedToGroupSearch","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"cellFormat":{"default":{"foregroundColor":null},"rules":[{"if":{"column":"IsMatchedToGroupSearch","fn":"=","literal":"NO MATCH"},"value":{"foregroundColor":"#E92828"}}]},"displayName":"IsMatchedToGroupSearch"}]},"invisibleColumns":[{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"table_name","type":"string","displayAs":"string","order":0,"title":"table_name","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"column_name","type":"string","displayAs":"string","order":1,"title":"column_name","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"access_entity_type","type":"string","displayAs":"string","order":5,"title":"access_entity_type","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"tags_list","type":"complex","displayAs":"json","order":14,"title":"tags_list","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"matched_catalog_level_tags","type":"complex","displayAs":"json","order":16,"title":"matched_catalog_level_tags","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"matched_schema_level_tags","type":"complex","displayAs":"json","order":17,"title":"matched_schema_level_tags","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"matched_table_level_tags","type":"complex","displayAs":"json","order":18,"title":"matched_table_level_tags","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"matched_column_level_tags","type":"complex","displayAs":"json","order":19,"title":"matched_column_level_tags","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"MatchedAccessHistoryCount","type":"integer","displayAs":"number","order":100023,"title":"MatchedAccessHistoryCount","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"NotMatchedAccessHistoryCount","type":"integer","displayAs":"number","order":100024,"title":"NotMatchedAccessHistoryCount","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false}],"allowHTMLByDefault":false,"itemsPerPage":25,"paginationSize":"default","condensed":true,"withRowNumber":false,"frame":{"showTitle":true,"showDescription":true,"title":"Access Audit History Table","description":"Detailed Breakdown of Access Events at the Entity (table/column) level. For each unique table/column entity and user, this table show the access count in the selected time frame, first access date, latest access date. "}}},"position":{"x":0,"y":51,"width":6,"height":13}},{"widget":{"name":"9e3991a6","textbox_spec":"### Group Policy Auditing Flag Filters\n-----\nThis section of filters is built to be able to answer the question of \"who read/wrote\" data, and were they in the groups I want them to be in to do these operations?\"\nThe most common use case here is to ask \"who read/wrote data with a PII tag that was NOT in a PII enabled group? - that answer SHOULD be zero\""},"position":{"x":0,"y":2,"width":6,"height":2}},{"widget":{"name":"07f66373","textbox_spec":"\n-----"},"position":{"x":0,"y":6,"width":6,"height":1}},{"widget":{"name":"4d9cab37","queries":[{"name":"parameter_dashboards/01ef7b63a7431b25beaa057249ac1d3d/datasets/01ef7b63ac8213f4a9d303e106a075da_group_name_csv","query":{"datasetName":"021e1eac","parameters":[{"name":"group_name_csv","keyword":"group_name_csv"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"parameterName":"group_name_csv","queryName":"parameter_dashboards/01ef7b63a7431b25beaa057249ac1d3d/datasets/01ef7b63ac8213f4a9d303e106a075da_group_name_csv"}]},"frame":{"showTitle":true,"title":"Groups Search List (csv)"}}},"position":{"x":0,"y":4,"width":3,"height":2}},{"widget":{"name":"d7e3cc78","queries":[{"name":"dashboards/01ef7b63a7431b25beaa057249ac1d3d/datasets/01ef7b63ac8213f4a9d303e106a075da_IsMatchedToGroupSearch","query":{"datasetName":"021e1eac","fields":[{"name":"IsMatchedToGroupSearch","expression":"`IsMatchedToGroupSearch`"},{"name":"IsMatchedToGroupSearch_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-multi-select","encodings":{"fields":[{"fieldName":"IsMatchedToGroupSearch","displayName":"IsMatchedToGroupSearch","queryName":"dashboards/01ef7b63a7431b25beaa057249ac1d3d/datasets/01ef7b63ac8213f4a9d303e106a075da_IsMatchedToGroupSearch"}]},"frame":{"showTitle":true,"title":"Is In Search Group"}}},"position":{"x":3,"y":4,"width":1,"height":2}},{"widget":{"name":"0bd61a59","queries":[{"name":"main_query","query":{"datasetName":"021e1eac","fields":[{"name":"sum(MatchedAccessHistoryCount)","expression":"SUM(`MatchedAccessHistoryCount`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"sum(MatchedAccessHistoryCount)","displayName":"Sum of MatchedAccessHistoryCount"}},"frame":{"showTitle":true,"title":"Records Where There is a Matched Group"}}},"position":{"x":4,"y":4,"width":1,"height":2}},{"widget":{"name":"0d065b60","queries":[{"name":"main_query","query":{"datasetName":"021e1eac","fields":[{"name":"sum(NotMatchedAccessHistoryCount)","expression":"SUM(`NotMatchedAccessHistoryCount`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"sum(NotMatchedAccessHistoryCount)","displayName":"Sum of NotMatchedAccessHistoryCount"}},"frame":{"showTitle":true,"title":"!!! Records with NO Matched Group !!!"}}},"position":{"x":5,"y":4,"width":1,"height":2}}]}]}