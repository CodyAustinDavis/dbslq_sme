{"datasets":[{"name":"bd4a1f65","displayName":"Query History With Ratios","query":"WITH raw_history AS (\nSELECT\nstatement_id,\nexecuted_by,\nstatement_text,\ncompute.warehouse_id AS warehouse_id,\nexecution_status,\nf.statement_type,\nCOALESCE(client_application, 'Unknown') AS client_application,\nCOALESCE(try_divide(total_duration_ms, 1000), 0) AS QueryRuntimeSeconds,\nCOALESCE(try_divide(total_task_duration_ms, 1000), 0) AS CPUTotalExecutionTime,\nCOALESCE(try_divide(execution_duration_ms, 1000), 0) AS ExecutionQueryTime, -- Included in Cost Per Query\nCOALESCE(try_divide(compilation_duration_ms, 1000), 0) AS CompilationQueryTime, -- Included in Cost Per Query\nCOALESCE(try_divide(waiting_at_capacity_duration_ms, 1000), 0) AS QueueQueryTime,\nCOALESCE(try_divide(waiting_for_compute_duration_ms, 1000), 0) AS StartUpQueryTime,\nCOALESCE(try_divide(result_fetch_duration_ms, 1000), 0) AS ResultFetchTime,\n-- Metric for query cost allocation - -- exclude metadata operations\nCASE WHEN COALESCE(try_divide(total_task_duration_ms, 1000),0) = 0 \n    THEN 0 \n    ELSE COALESCE(try_divide(total_duration_ms, 1000), 0)  + COALESCE(try_divide(compilation_duration_ms, 1000), 0) -- Query total time is compile time + execution time\n    END AS TotalResourceTimeUsedForAllocation,\nstart_time,\nend_time,\nupdate_time,\nCOALESCE(read_bytes, 0) AS read_bytes,\nCOALESCE(read_io_cache_percent, 0) AS read_io_cache_percent,\nfrom_result_cache,\nCOALESCE(spilled_local_bytes, 0) AS spilled_local_bytes,\nCOALESCE(total_task_duration_ms / total_duration_ms, NULL) AS TotalCPUTime_To_Execution_Time_Ratio, --execution time does seem to vary across query type, using total time to standardize\nCOALESCE(waiting_at_capacity_duration_ms / total_duration_ms, 0) AS ProportionQueueTime,\nAVG(try_divide(total_duration_ms, 1000))  OVER () AS WarehouseAvgQueryRuntime,\nAVG(try_divide(waiting_at_capacity_duration_ms, 1000)) OVER () AS WarehouseAvgQueueTime,\nAVG(COALESCE(try_divide(waiting_at_capacity_duration_ms, 1000) / try_divide(total_duration_ms, 1000), 0)) OVER () AS WarehouseAvgProportionTimeQueueing,\n-- Can use this to chargeback (as long as you know denominator is only USED task time, not including idele time)\nCASE WHEN read_bytes > 0 THEN try_divide(read_bytes,(1024*1024*1024))ELSE 0 END AS ReadDataAmountInGB,\nCASE WHEN read_io_cache_percent > 0 THEN 'Used Cache' ELSE 'No Cache' END AS UsedCacheFlag,\nCASE WHEN spilled_local_bytes > 0 THEN 'Spilled Data To Disk' ELSE 'No Spill' END AS HasSpillFlag,\nCASE WHEN read_bytes > 0 THEN 'Did Read Data' ELSE 'No Data Read' END AS ReadDataFlag,\nCASE WHEN CPUTotalExecutionTime > 0 THEN 'UsedWorkerTasks' ELSE 'NoWorkers' END AS UsedWorkerTasksFlag,\nCASE WHEN QueryRuntimeSeconds >= :long_running_seconds_treshold::float THEN 'Long Running' ELSE 'Short Running' END AS LongRunningQueryFlag,\nCASE WHEN spilled_local_bytes > 0 THEN 1 ELSE 0 END AS Calc_HasSpillFlag,\nCASE WHEN read_bytes > 0 THEN 0.25 ELSE 0 END AS Calc_ReadDataFlag,\nCASE WHEN CPUTotalExecutionTime > 0 THEN 0.25 ELSE 0 END AS Calc_UsedWorkerTasksFlag,\nCASE WHEN QueryRuntimeSeconds >= :long_running_seconds_treshold::float THEN 1 ELSE 0 END AS Calc_LongRunningQueryFlag,\n\n-- Query Tagging \nregexp_replace(\nregexp_extract(\nstatement_text, \nr'/\\*.*?QUERY_TAG:(.*?)(?=\\*/)',\n1\n), \n'QUERY_TAG:',\n''\n) AS raw_tagged\n\nFROM system.query.history f\nWHERE compute.warehouse_id = :warehouse_id -- Updated with new sys table schema\nAND start_time BETWEEN :start_range::timestamp AND :end_range::timestamp -- TO DO: this technically does not line up with exact warehouse time window - need to split query time as well\nAND statement_type IS NOT NULL\n),\n\nhistory AS (\n        SELECT *,\n        SUM(TotalResourceTimeUsedForAllocation) OVER () AS TotalUsedTimeInWarehouse, -- Remove listing commands in time - this are essentially \"free\"\n        SUM(COALESCE(TotalResourceTimeUsedForAllocation, 0)) OVER (PARTITION BY statement_text) AS TotalStatementTextTimeUsed, -- for query level aggregates\n    try_divide(TotalResourceTimeUsedForAllocation , TotalUsedTimeInWarehouse) AS ProportionOfWarehouseTimeUsedByQuery -- Remove listing commands in time - this are essentially \"free\"\nFROM raw_history\n),\n\n-- Warehosue Costs for the same query window \nfiltered_warehouse_usage AS (\n        -- This is to properly handle attributing partial hours/seconds and match it to the seleted query window\n\n        WITH trimmed_usage AS (\n        SELECT \n        -- Start Time Range Trimming\n        timestampdiff(SECOND, usage_start_time, :start_range)::float AS seconds_before_start_range,\n        timestampdiff(SECOND, usage_start_time, usage_end_time)::float AS full_start_range_length,\n        full_start_range_length - seconds_before_start_range AS seconds_remaining_in_original_start_range,\n        greatest(:start_range, usage_start_time) AS trimmed_start_time,\n        -- End Time Range Trimming\n        least(:end_range, usage_end_time) AS trimmed_end_time,\n        timestampdiff(SECOND, :end_range, usage_end_time)::float AS seconds_after_end_range,\n        timestampdiff(SECOND, usage_start_time, usage_end_time)::float AS full_end_range_length,\n        full_end_range_length - seconds_after_end_range AS seconds_remaining_in_original_end_range,\n\n        -- Calculate trim proportion to multiple DBUs by proportion of the full hour in the active window\n        try_divide(CASE WHEN seconds_before_start_range > 0 THEN (full_start_range_length - seconds_before_start_range) ELSE NULL END, full_start_range_length) AS StartTrimProportion,\n        try_divide(CASE WHEN seconds_after_end_range > 0 THEN (full_start_range_length - seconds_after_end_range) ELSE NULL END, full_start_range_length) AS EndTrimProportion,\n        COALESCE(COALESCE(EndTrimProportion, StartTrimProportion), 1) AS TrimProportion,\n        usage_start_time,\n        usage_end_time,\n        usage_quantity AS dbus,\n        usage_metadata.warehouse_id AS warehouse_id\n        FROM system.billing.usage\n        WHERE usage_metadata.warehouse_id = :warehouse_id\n        AND usage_unit = 'DBU'\n        AND (\n        (usage_start_time BETWEEN :start_range::timestamp AND :end_range::timestamp)\n        OR (usage_end_time BETWEEN :start_range::timestamp AND :end_range::timestamp)\n        )\n        )\n\n        SELECT \n        warehouse_id,\n        SUM(dbus*TrimProportion) AS Total_Warehouse_Period_DBUs,\n        SUM(dbus*TrimProportion*:cluster_unit_price::float) AS Total_Warehouse_Period_Dollars\n        FROM trimmed_usage\n        GROUP BY warehouse_id\n),\n\n\n/*\nWAREHOUSE LEVEL SKEW / EFFICIENCY METRICS\n-- Calculate the warehouse average task times to execution time to get a basedline to compare relative skew/efficiency across warehouse\nNOTE: We do this because we do not yet have the \"warehouses\" table, which would give us the size/rough cores of the cluster, \nso we do NOT programmatically have the ability to know what a proper ratio is. If we knew the number of cores on the cluster, our skew ratio would look like this: \n\nSKEW RATIO = (TotalQueryTaskTime / NumberOfCores) / ExecutionTime = 1 in a perfect/avg scenario. This means that ALL cores were perfectly fully utilize during the entire execution\nRatio ~1 means that there is lots of paralleliszation (high tasks time per unit of time).\nRatio < 1 means that the exeuction time was not fully filled by task time across all cores. The smaller this number is, the more likely it is to be skewed. \nShould never really have a ratio > 1 (that would mean there were more total task time than cores could theoretically processs) when we KNOW the number of cores. \n-- Is the query getting the warehouse fully?\n-- Good ratio (is .5 reasonable?)\n-- Closer to zero is a problem (<0.05) -- only matters when queyies are large (filter num tasks / cores)\n\nNow since we do NOTE automatically know the number of cores, we have to make this ratio relative and create a PROXY metric. \nTo do that, we will take the average ratio of Total Task Time / Execution Time across the whole warehouse for ALL queries that had task time (exclude metadata operations)\nIdeal Ratio = 1 = ((Task Time)/ Cores ) / Execution Time\nSo Execution Time = Task Time / Cores\nSo Cores = Task Time / Execution Time in a perfect / avg scenario. \n\nThis is NOT perfect, but helps as a proxy for now. Since this metric is to identify relatively inefficient/skewed queryes, it should work well enough. \n\n*/\n\nwarehouse_average_ratio_metrics AS (\nSELECT \nwarehouse_id,\ntry_divide(AVG(CPUTotalExecutionTime)::float, AVG(QueryRuntimeSeconds)::float)::float AS WarehouseAvgTaskSkewRatio,\ntry_divide(MAX(CPUTotalExecutionTime), MAX(QueryRuntimeSeconds))::float AS WarehouseMaxTaskSkewRatio,\nAVG(ReadDataAmountInGB)::float AS WarehouseAvgReadDataInGBPerQuery,\nstddev(ReadDataAmountInGB)::float AS WarehouseStdReadDataInGBPerQuery,\nAVG(read_io_cache_percent)::float AS WarehouseAvgDeltaCachePercent,\nstddev(read_io_cache_percent)::float AS WarehouseStdDeltaCachePercent,\nAVG(spilled_local_bytes)::float AS WarehouseAvgDiskSpillAmount,\nstddev(spilled_local_bytes)::float AS WarehouseStdDiskSpillAmount\nFROM history\nWHERE CPUTotalExecutionTime > 0 AND ReadDataAmountInGB > 0 -- Means that the query read data as well as used cpu task time in workers\nAND execution_status NOT IN (\"FAILED\")\nGROUP BY warehouse_id\n),\n\n-- Single Metric to indicate an inefficient query\n/*\nInefficient query attributes: \n1. Long runtime (> X number of seconds/minutes)\n2. Poor Parallelization (high wall clock time with low task time compared to ratio of all warehouse)\n3. Spilling To Disk\n4. Lots of Data Read (Compared to Avg Data Read for Warehouse) - Using Z Score as a rough metric for this\n\nPrecursor filters\n1. Query must have task time > 0 (meaning workers were actually used to execute the query) (this filters out non sparky stuff like GRANT/ALTER/metadata)\n2. Must have data read in (>0 GB)\n*/\n\nquery_level_intel_metrics AS (\nSELECT qh.*,\nw.WarehouseAvgTaskSkewRatio AS WarehouseAvgTaskToExecutionTimeRatio,\n\n-- For the query efficiency ratio, we invert the above ratio to use the warehouse proxy metric\nCASE WHEN CPUTotalExecutionTime > 0 \n        AND ReadDataAmountInGB > 0 -- Means that the query read data as well as used cpu task time in workers\n        AND execution_status NOT IN (\"FAILED\")\n    THEN try_divide(QueryRuntimeSeconds, try_divide(qh.CPUTotalExecutionTime, w.WarehouseAvgTaskSkewRatio))\n    ELSE NULL\n    END AS QueryEfficiencyRatio,  -- WarehouseSkewRatio is the proxy for number of cores/level of parallelism in the cluster\nw.WarehouseAvgReadDataInGBPerQuery,\nw.WarehouseStdReadDataInGBPerQuery,\nw.WarehouseAvgDeltaCachePercent,\nw.WarehouseStdDeltaCachePercent,\nw.WarehouseAvgDiskSpillAmount,\nw.WarehouseStdDiskSpillAmount,\nu.Total_Warehouse_Period_Dollars,\n(u.Total_Warehouse_Period_Dollars::float*ProportionOfWarehouseTimeUsedByQuery::float) AS AllocatedQueryCostByTime\nFROM history AS qh\nLEFT JOIN warehouse_average_ratio_metrics AS w ON w.warehouse_id = qh.warehouse_id\nLEFT JOIN filtered_warehouse_usage AS u ON u.warehouse_id = qh.warehouse_id\n),\n\n-- Calculate Z Score for warehouse read data and other metrics\nzscores AS (\nSELECT \n*,\nAVG(QueryEfficiencyRatio) OVER () AS WarehouseAvgQueryEfficiencyRatio,\ntry_divide((spilled_local_bytes - WarehouseAvgDiskSpillAmount) , WarehouseStdDiskSpillAmount) AS SpillAmountZScore,\ntry_divide((read_io_cache_percent - WarehouseAvgDeltaCachePercent), WarehouseStdDeltaCachePercent) AS CachePercentZScore,\ntry_divide((ReadDataAmountInGB - WarehouseAvgReadDataInGBPerQuery), WarehouseStdReadDataInGBPerQuery) AS DataVolumeZScore,\n\nPERCENTILE_CONT(0.5) WITHIN GROUP (ORDER BY QueryRuntimeSeconds) OVER () AS QueryRuntime_P50,\nPERCENTILE_CONT(0.9) WITHIN GROUP (ORDER BY QueryRuntimeSeconds) OVER () AS QueryRuntime_P90,\nPERCENTILE_CONT(0.95) WITHIN GROUP (ORDER BY QueryRuntimeSeconds) OVER () AS QueryRuntime_P95,\nPERCENTILE_CONT(0.99) WITHIN GROUP (ORDER BY QueryRuntimeSeconds) OVER () AS QueryRuntime_P99,\n-- Queue Time\nPERCENTILE_CONT(0.5) WITHIN GROUP (ORDER BY QueueQueryTime) OVER () AS QueryQueueTime_P50,\nPERCENTILE_CONT(0.9) WITHIN GROUP (ORDER BY QueueQueryTime) OVER () AS QueryQueueTime_P90,\nPERCENTILE_CONT(0.95) WITHIN GROUP (ORDER BY QueueQueryTime) OVER () AS QueryQueueTime_P95,\nPERCENTILE_CONT(0.99) WITHIN GROUP (ORDER BY QueueQueryTime) OVER () AS QueryQueueTime_P99\n\nFROM query_level_intel_metrics\n)\n\nSELECT \n*,\nCASE WHEN DataVolumeZScore > (CASE WHEN length(:data_volume_min_z_score::float) > 1 THEN :data_volume_min_z_score::float ELSE 1 END) THEN 'High Relative Volume Read' ELSE 'Not High Relative Volume' END AS HighDataVolumeFlag,\nCASE WHEN DataVolumeZScore > (CASE WHEN length(:data_volume_min_z_score::float) > 1 THEN :data_volume_min_z_score::float ELSE 1 END) THEN 1 ELSE 0 END AS Calc_HighDataVolumeFlag,\n(Calc_HasSpillFlag + Calc_ReadDataFlag + Calc_UsedWorkerTasksFlag + Calc_LongRunningQueryFlag + Calc_HighDataVolumeFlag\n+ COALESCE(SpillAmountZScore, 0) + COALESCE(DataVolumeZScore, 0)) AS ProblemQueryMetric,\n-- Query Tag Cleaned\nCASE WHEN length(raw_tagged) >= 1 THEN raw_tagged ELSE 'Untagged' END AS QueryTag\nFROM zscores\n\n\n\n","parameters":[{"displayName":"long_running_seconds_treshold","keyword":"long_running_seconds_treshold","dataType":"DECIMAL","defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"120"}]}}},{"displayName":"data_volume_min_z_score","keyword":"data_volume_min_z_score","dataType":"DECIMAL","defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"2"}]}}},{"displayName":"warehouse_id","keyword":"warehouse_id","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"475b94ddc7cd5211"}]}}},{"displayName":"start_range","keyword":"start_range","dataType":"DATETIME","defaultSelection":{"values":{"dataType":"DATETIME","values":[{"value":"now-7d/d"}]}}},{"displayName":"end_range","keyword":"end_range","dataType":"DATETIME","defaultSelection":{"values":{"dataType":"DATETIME","values":[{"value":"now/d"}]}}},{"displayName":"cluster_unit_price","keyword":"cluster_unit_price","dataType":"DECIMAL","defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"0.7"}]}}}]},{"name":"c625c852","displayName":"Cluster Scaling","query":"WITH raw_scaling AS (\nSELECT \ndate_trunc('MINUTE', event_time) AS event_minute,\nMAX(w.cluster_count) AS clusters\nFROM system.compute.warehouse_events w\nWHERE warehouse_id = :warehouse_id\nAND event_type IN (\"RUNNING\", \"SCALED_UP\", \"SCALED_DOWN\", \"STOPPED\")\nGROUP BY date_trunc('MINUTE', event_time)\nORDER BY event_minute\n),\n\nfull_series AS (\nSELECT explode(sequence((SELECT MIN(event_minute) FROM raw_scaling), (SELECT MAX(event_minute) FROM raw_scaling), INTERVAL 1 MINUTE)) AS minuteChunk\n),\n\nfilled_in_series AS (\nSELECT \nspine.minuteChunk AS event_minute,\nMAX(s2.clusters) AS NumberOfClustersOn\nFROM full_series AS spine\nLEFT JOIN raw_scaling AS s2 ON\n date_trunc('minute', s2.event_minute) = spine.minuteChunk --already aggregated at minute rounded level\nGROUP BY \nspine.minuteChunk\nORDER BY event_minute \n)\n\nSELECT event_minute,\nLAST_VALUE(NumberOfClustersOn, true) OVER (ORDER BY event_minute) AS NumberOfClustersOn\n FROM filled_in_series ORDER BY event_minute","parameters":[{"displayName":"warehouse_id","keyword":"warehouse_id","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"475b94ddc7cd5211"}]}}}]},{"name":"fea591de","displayName":"Warehouse Billing","query":"\nWITH filtered_usage AS (SELECT \n*,\nusage_quantity*(:cluster_unit_price::float) AS UsageDollars\nFROM system.billing.usage\nWHERE usage_metadata.warehouse_id = :warehouse_id\n),\nusage_aggregated AS (\n  SELECT \n    date_trunc('hour', usage_start_time) AS usage_hour,\n    SUM(usage_quantity) AS UsageDBUs,\n    SUM(UsageDollars) AS UsageDollars\n  FROM filtered_usage \n  GROUP BY date_trunc('hour', usage_start_time)\n  ORDER BY usage_hour\n),\nsmoothed_usage AS (\nSELECT \n  usage_hour,\n  UsageDollars,\n  UsageDBUs,\n  AVG(UsageDollars) OVER (ORDER BY usage_hour ROWS BETWEEN 11 PRECEDING AND CURRENT ROW) AS fast_moving_average,\n  AVG(UsageDollars) OVER (ORDER BY usage_hour ROWS BETWEEN 23 PRECEDING AND CURRENT ROW) AS slow_moving_average\nFROM usage_aggregated\n),\npop_change AS (\nSELECT \n*,\nfast_moving_average - LAG(fast_moving_average, 12, 0) OVER (ORDER BY usage_hour) AS p12h_change,\nslow_moving_average - LAG(slow_moving_average, 24, 0) OVER (ORDER BY usage_hour) AS p24h_change\nFROM smoothed_usage\n),\n\nfinal_change AS (\nSELECT \n*,\nCOALESCE(ROUND(( try_divide(p12h_change , LAG(UsageDollars, 12, 0) OVER (ORDER BY usage_hour))) * 100, 2)::float, 0::float) AS p12h_change_percentage,\n ROUND((try_divide(p24h_change , LAG(UsageDollars, 24, 0) OVER (ORDER BY usage_hour))) * 100, 2)::float AS p24h_change_percentage\nFROM pop_change\n)\n\nSELECT \n*,\nCASE WHEN p24h_change_percentage > :percent_increase::float THEN 'High Momentum' ELSE 'Within Range' END AS HighIncreaseFlag -- i.e. greater than 20% increase period over period\nFROM final_change\n--ORDER BY usage_house DESC\n--LIMIT 1","parameters":[{"displayName":"warehouse_id","keyword":"warehouse_id","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"475b94ddc7cd5211"}]}}},{"displayName":"cluster_unit_price","keyword":"cluster_unit_price","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"0.7"}]}}},{"displayName":"percent_increase","keyword":"percent_increase","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"20"}]}}}]},{"name":"b193d73e","displayName":"Query Statement Resource Attribution","query":"WITH raw_history AS (\n    \nSELECT\nstatement_id,\nexecuted_by,\nstatement_text,\ncompute.warehouse_id AS warehouse_id,\nexecution_status,\nf.statement_type,\nCOALESCE(client_application, 'Unknown') AS client_application,\ntry_divide(total_duration_ms, 1000) AS QueryRuntimeSeconds,\ntry_divide(total_task_duration_ms, 1000) AS CPUTotalExecutionTime,\ntry_divide(execution_duration_ms, 1000) AS ExecutionQueryTime,\ntry_divide(compilation_duration_ms, 1000) AS CompilationQueryTime,\ntry_divide(waiting_at_capacity_duration_ms, 1000) AS QueueQueryTime,\ntry_divide(waiting_for_compute_duration_ms, 1000) AS StartUpQueryTime,\ntry_divide(result_fetch_duration_ms, 1000) AS ResultFetchTime,\n-- Metric for query cost allocation - -- exclude metadata operations\nCASE WHEN COALESCE(try_divide(total_task_duration_ms, 1000),0) = 0 \n    THEN 0 \n    ELSE COALESCE(try_divide(total_duration_ms, 1000), 0)  + COALESCE(try_divide(compilation_duration_ms, 1000), 0) -- Query total time is compile time + execution time\n    END AS TotalResourceTimeUsedForAllocation,\n\nstart_time,\nend_time,\nCOALESCE(total_task_duration_ms / execution_duration_ms, NULL) AS TotalCPUTime_To_Execution_Time_Ratio,\nCOALESCE(waiting_at_capacity_duration_ms / total_duration_ms, 0) AS ProportionQueueTime,\nAVG(COALESCE(total_task_duration_ms / execution_duration_ms, NULL)) OVER () AS AvgTaskSkewRatio,\nAVG(try_divide(total_duration_ms, 1000))  OVER () AS AvgQueryRuntime,\nAVG(try_divide(waiting_at_capacity_duration_ms, 1000)) OVER () AS AvgQueueTime,\nAVG(COALESCE(try_divide(waiting_at_capacity_duration_ms, 1000) / try_divide(total_duration_ms, 1000), 0)) OVER () AS AvgProportionTimeQueueing,\n\n-- Query Tagging \nregexp_replace(\nregexp_extract(\nstatement_text, \nr'/\\*.*?QUERY_TAG:(.*?)(?=\\*/)',\n0\n), \n'QUERY_TAG:', \n''\n) AS raw_tagged\n-- Can use this to chargeback (as long as you know denominator is only USED task time, not including idele time)\nFROM system.query.history f\nWHERE compute.warehouse_id = :warehouse_id\nAND (start_time >= :start_time AND end_time <= :end_time) -- Must pushdown these filters for accurate % aggregates by warehouse\nAND total_duration_ms > 0\nAND statement_type IS NOT NULL\n),\n\nhistory AS (\n    SELECT *,\n    SUM(TotalResourceTimeUsedForAllocation) OVER () AS TotalUsedTimeInWarehouse, -- Remove listing commands in time - this are essentially \"free\"\n    SUM(COALESCE(TotalResourceTimeUsedForAllocation, 0)) OVER (PARTITION BY statement_text) AS TotalStatementTextTimeUsed, -- for query level aggregates\n    try_divide(TotalResourceTimeUsedForAllocation , TotalUsedTimeInWarehouse) AS ProportionOfWarehouseTimeUsedByQuery-- Remove listing commands in time - this are essentially \"free\"\n    FROM raw_history\n),\n\n-- Warehosue Costs for the same query window \nfiltered_warehouse_usage AS (\n        -- This is to properly handle attributing partial hours/seconds and match it to the seleted query window\n\n        WITH trimmed_usage AS (\n        SELECT \n        -- Start Time Range Trimming\n        timestampdiff(SECOND, usage_start_time, :start_time)::float AS seconds_before_start_range,\n        timestampdiff(SECOND, usage_start_time, usage_end_time)::float AS full_start_range_length,\n        full_start_range_length - seconds_before_start_range AS seconds_remaining_in_original_start_range,\n        greatest(:start_time, usage_start_time) AS trimmed_start_time,\n        -- End Time Range Trimming\n        least(:end_time, usage_end_time) AS trimmed_end_time,\n        timestampdiff(SECOND, :end_time, usage_end_time)::float AS seconds_after_end_range,\n        timestampdiff(SECOND, usage_start_time, usage_end_time)::float AS full_end_range_length,\n        full_end_range_length - seconds_after_end_range AS seconds_remaining_in_original_end_range,\n\n        -- Calculate trim proportion to multiple DBUs by proportion of the full hour in the active window\n        try_divide(CASE WHEN seconds_before_start_range > 0 THEN (full_start_range_length - seconds_before_start_range) ELSE NULL END, full_start_range_length) AS StartTrimProportion,\n        try_divide(CASE WHEN seconds_after_end_range > 0 THEN (full_start_range_length - seconds_after_end_range) ELSE NULL END, full_start_range_length) AS EndTrimProportion,\n        COALESCE(COALESCE(EndTrimProportion, StartTrimProportion), 1) AS TrimProportion,\n        usage_start_time,\n        usage_end_time,\n        usage_quantity AS dbus,\n        usage_metadata.warehouse_id AS warehouse_id\n        FROM system.billing.usage\n        WHERE usage_metadata.warehouse_id = :warehouse_id\n        AND usage_unit = 'DBU'\n        AND (\n        (usage_start_time BETWEEN :start_time::timestamp AND :end_time::timestamp)\n        OR (usage_end_time BETWEEN :start_time::timestamp AND :end_time::timestamp)\n        )\n        )\n\n        SELECT \n        warehouse_id,\n        SUM(dbus*TrimProportion) AS Total_Warehouse_Period_DBUs,\n        SUM(dbus*TrimProportion*:cluster_unit_price::float) AS Total_Warehouse_Period_Dollars\n        FROM trimmed_usage\n        GROUP BY warehouse_id\n),\n\nhistory_with_pricing AS (\nSELECT \nh1.*,\nwh.Total_Warehouse_Period_DBUs, \nwh.Total_Warehouse_Period_Dollars\nFROM history AS h1\nLEFT JOIN filtered_warehouse_usage AS wh ON h1.warehouse_id = wh.warehouse_id\n),\n\n\nquery_proportion_agg AS (\n-- Cumulative Sum by statement_text (not query id, but distinct statement)\nSELECT \n-- We do this to \nsha2(regexp_replace(regexp_replace(REGEXP_REPLACE(statement_text, '/\\\\*.*?\\\\*/', ''), '(--[^\\\\n]*)', ''), ' ', ''), 256) AS query_signature,\nMAX(statement_text) AS statement_text,\nMAX(statement_type)AS statetment_type,\nMAX(raw_tagged) AS raw_tagged,\nCOUNT(statement_id) AS NumberOfExecutions,\nAVG(QueryRuntimeSeconds) AS AvgRuntimeInSeconds,\nMAX(TotalUsedTimeInWarehouse) AS TotalWarehouseTimeUsed,\nMAX(Total_Warehouse_Period_DBUs) AS Total_Warehouse_Period_DBUs,\nMAX(Total_Warehouse_Period_Dollars) AS Total_Warehouse_Period_Dollars,\nSUM(TotalResourceTimeUsedForAllocation) AS TotalStatementTimeUsed, -- Excludes metadata operations\nARRAY_DISTINCT(COLLECT_LIST(NAMED_STRUCT('user', executed_by, 'execution_count', (SELECT COUNT(statement_id) FROM history AS in_hist WHERE in_hist.executed_by = u.executed_by AND in_hist.statement_text = u.statement_text)))) AS UserRunCounts\nFROM history_with_pricing AS u\nGROUP BY query_signature\n),\n\nstatement_attribution AS (\nSELECT \na.*,\ntry_divide(TotalStatementTimeUsed, TotalWarehouseTimeUsed) AS StatementTaskTimeProportion,\nTotal_Warehouse_Period_Dollars*StatementTaskTimeProportion AS StatementAllocatedDollars,\nTotal_Warehouse_Period_DBUs*StatementTaskTimeProportion AS StatementAllocatedDBUs\nFROM query_proportion_agg a\n),\n\nstatement_rollup_cumulative_sum AS (\n    SELECT \n    *,\n    SUM(StatementTaskTimeProportion) OVER (ORDER BY StatementTaskTimeProportion DESC) AS CumulativeProportionOfWarehouseTime\n    FROM statement_attribution\n)\n\nSELECT \ns.*,\nStatementTaskTimeProportion*100 AS StatementWarehouseTimePercentage,\nCASE WHEN length(raw_tagged) >= 1 THEN raw_tagged ELSE 'Untagged' END AS QueryTag,\nCASE WHEN s.CumulativeProportionOfWarehouseTime <= :query_pareto::float THEN s.statement_text ELSE 'Remaining Long Tail of Queries' END AS QueryProportionParetoFlag\nFROM statement_rollup_cumulative_sum s\nORDER BY CumulativeProportionOfWarehouseTime","parameters":[{"displayName":"query_pareto","keyword":"query_pareto","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"0.5"}]}}},{"displayName":"warehouse_id","keyword":"warehouse_id","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"475b94ddc7cd5211"}]}}},{"displayName":"start_time","keyword":"start_time","dataType":"DATETIME","defaultSelection":{"values":{"dataType":"DATETIME","values":[{"value":"2024-03-18T09:31:18.000Z"}]}}},{"displayName":"end_time","keyword":"end_time","dataType":"DATETIME","defaultSelection":{"values":{"dataType":"DATETIME","values":[{"value":"now/d"}]}}},{"displayName":"cluster_unit_price","keyword":"cluster_unit_price","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"0.7"}]}}}]}],"pages":[{"name":"60a9f37a","displayName":"New Page","layout":[{"widget":{"name":"1eeca059","queries":[{"name":"parameter_dashboards/01eee4980f461d848d978ef2b00c7f1a/datasets/01eeeacad13e14ae90b902c6c8537ea0_cluster_unit_price","query":{"datasetName":"fea591de","parameters":[{"name":"cluster_unit_price","keyword":"cluster_unit_price"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"parameterName":"cluster_unit_price","queryName":"parameter_dashboards/01eee4980f461d848d978ef2b00c7f1a/datasets/01eeeacad13e14ae90b902c6c8537ea0_cluster_unit_price"}]},"frame":{"showTitle":true,"title":"Cluster Unit Price ($)"}}},"position":{"x":1,"y":4,"width":1,"height":2}},{"widget":{"name":"e457d720","queries":[{"name":"main_query","query":{"datasetName":"bd4a1f65","fields":[{"name":"avg(QueueQueryTime)","expression":"AVG(`QueueQueryTime`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"avg(QueueQueryTime)","displayName":"Average QueueQueryTime"}},"frame":{"showTitle":true,"title":"Avg Queue Time (s)"}}},"position":{"x":4,"y":40,"width":1,"height":2}},{"widget":{"name":"dc9006e8","queries":[{"name":"main_query","query":{"datasetName":"bd4a1f65","fields":[{"name":"HighDataVolumeFlag","expression":"`HighDataVolumeFlag`"},{"name":"count(*)","expression":"COUNT(`*`)"},{"name":"hourly(start_time)","expression":"DATE_TRUNC(\"HOUR\", `start_time`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"hourly(start_time)","scale":{"type":"temporal"},"axis":{"title":"Start Time"},"displayName":"Start Time"},"y":{"fieldName":"count(*)","scale":{"type":"quantitative"},"axis":{"title":"Queries"},"displayName":"Queries"},"color":{"fieldName":"HighDataVolumeFlag","scale":{"type":"categorical","mappings":[{"value":"Used Cache","color":"#00A972"},{"value":"No Cache","color":"#8BCAE7"},{"value":"No Spill","color":"#00A972"},{"value":"High Relative Volume Read","color":"#AB4057"},{"value":"Not High Relative Volume","color":"#00A972"}]},"legend":{"position":"bottom"},"displayName":"Has Spill"}},"frame":{"showTitle":true,"title":"Queries With High Data Volume"},"mark":{"layout":"stack"}}},"position":{"x":0,"y":84,"width":3,"height":6}},{"widget":{"name":"12f9b25d","queries":[{"name":"main_query","query":{"datasetName":"bd4a1f65","fields":[{"name":"statement_id","expression":"`statement_id`"},{"name":"AllocatedQueryCostByTime","expression":"`AllocatedQueryCostByTime`"},{"name":"QueryRuntimeSeconds","expression":"`QueryRuntimeSeconds`"},{"name":"QueryTag","expression":"`QueryTag`"},{"name":"statement_text","expression":"`statement_text`"},{"name":"execution_status","expression":"`execution_status`"},{"name":"statement_type","expression":"`statement_type`"},{"name":"executed_by","expression":"`executed_by`"},{"name":"CPUTotalExecutionTime","expression":"`CPUTotalExecutionTime`"},{"name":"TotalResourceTimeUsedForAllocation","expression":"`TotalResourceTimeUsedForAllocation`"},{"name":"ExecutionQueryTime","expression":"`ExecutionQueryTime`"},{"name":"CompilationQueryTime","expression":"`CompilationQueryTime`"},{"name":"QueueQueryTime","expression":"`QueueQueryTime`"},{"name":"StartUpQueryTime","expression":"`StartUpQueryTime`"},{"name":"ResultFetchTime","expression":"`ResultFetchTime`"},{"name":"start_time","expression":"`start_time`"},{"name":"end_time","expression":"`end_time`"},{"name":"update_time","expression":"`update_time`"},{"name":"TotalCPUTime_To_Execution_Time_Ratio","expression":"`TotalCPUTime_To_Execution_Time_Ratio`"},{"name":"ProportionQueueTime","expression":"`ProportionQueueTime`"},{"name":"read_bytes","expression":"`read_bytes`"},{"name":"read_io_cache_percent","expression":"`read_io_cache_percent`"},{"name":"from_result_cache","expression":"`from_result_cache`"},{"name":"spilled_local_bytes","expression":"`spilled_local_bytes`"},{"name":"ReadDataAmountInGB","expression":"`ReadDataAmountInGB`"},{"name":"ReadDataFlag","expression":"`ReadDataFlag`"},{"name":"UsedWorkerTasksFlag","expression":"`UsedWorkerTasksFlag`"},{"name":"LongRunningQueryFlag","expression":"`LongRunningQueryFlag`"},{"name":"WarehouseAvgTaskToExecutionTimeRatio","expression":"`WarehouseAvgTaskToExecutionTimeRatio`"},{"name":"CachePercentZScore","expression":"`CachePercentZScore`"},{"name":"HasSpillFlag","expression":"`HasSpillFlag`"},{"name":"UsedCacheFlag","expression":"`UsedCacheFlag`"},{"name":"HighDataVolumeFlag","expression":"`HighDataVolumeFlag`"}],"disaggregated":true}}],"spec":{"version":1,"widgetType":"table","encodings":{"columns":[{"fieldName":"statement_id","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":0,"title":"statement_id","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"cellFormat":{"default":{"foregroundColor":"#356AFF"},"rules":[{"if":{"column":"execution_status","fn":"=","literal":"FINISHED"},"value":{"foregroundColor":"#3BD973"}},{"if":{"column":"execution_status","fn":"=","literal":"FAILED"},"value":{"foregroundColor":"#E92828"}},{"if":{"column":"execution_status","fn":"=","literal":"CANCELED"},"value":{"foregroundColor":"#494949"}}]},"displayName":"statement_id"},{"fieldName":"AllocatedQueryCostByTime","numberFormat":"$0.0000","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":1,"title":"Query Cost ($)","allowSearch":false,"alignContent":"center","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"description":"Query Cost Allocated By Total Runtime In Warehouse Period","cellFormat":{"default":{"foregroundColor":"#002FB4"},"rules":[]},"displayName":"AllocatedQueryCostByTime"},{"fieldName":"QueryRuntimeSeconds","numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":2,"title":"Runtime (s)","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"QueryRuntimeSeconds"},{"fieldName":"QueryTag","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":3,"title":"QueryTag","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"QueryTag"},{"fieldName":"statement_text","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":5,"title":"Query","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"statement_text"},{"fieldName":"execution_status","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":9,"title":"execution_status","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"execution_status"},{"fieldName":"statement_type","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":10,"title":"statement_type","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"statement_type"},{"fieldName":"executed_by","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":11,"title":"executed_by","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"executed_by"},{"fieldName":"CPUTotalExecutionTime","numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":13,"title":"CPUTotalExecutionTime","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"CPUTotalExecutionTime"},{"fieldName":"TotalResourceTimeUsedForAllocation","numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":14,"title":"TotalResourceTimeUsedForAllocation","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"description":"This is the query task time and used for query time/cost attribution. Some operations are metadata only and are not included in warehouse utilization and cost","displayName":"TotalResourceTimeUsedForAllocation"},{"fieldName":"ExecutionQueryTime","numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":15,"title":"ExecutionQueryTime","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"ExecutionQueryTime"},{"fieldName":"CompilationQueryTime","numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":16,"title":"CompilationQueryTime","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"CompilationQueryTime"},{"fieldName":"QueueQueryTime","numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":17,"title":"QueueQueryTime","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"QueueQueryTime"},{"fieldName":"StartUpQueryTime","numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":18,"title":"StartUpQueryTime","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"StartUpQueryTime"},{"fieldName":"ResultFetchTime","numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":19,"title":"ResultFetchTime","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"ResultFetchTime"},{"fieldName":"start_time","dateTimeFormat":"YYYY-MM-DD HH:mm:ss.SSS","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"datetime","displayAs":"datetime","visible":true,"order":21,"title":"start_time","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"start_time"},{"fieldName":"end_time","dateTimeFormat":"YYYY-MM-DD HH:mm:ss.SSS","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"datetime","displayAs":"datetime","visible":true,"order":22,"title":"end_time","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"end_time"},{"fieldName":"update_time","dateTimeFormat":"YYYY-MM-DD HH:mm:ss.SSS","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"datetime","displayAs":"datetime","visible":true,"order":23,"title":"update_time","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"update_time"},{"fieldName":"TotalCPUTime_To_Execution_Time_Ratio","numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":24,"title":"TotalCPUTime_To_Execution_Time_Ratio","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"TotalCPUTime_To_Execution_Time_Ratio"},{"fieldName":"ProportionQueueTime","numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":25,"title":"ProportionQueueTime","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"ProportionQueueTime"},{"fieldName":"read_bytes","numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"integer","displayAs":"number","visible":true,"order":26,"title":"read_bytes","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"read_bytes"},{"fieldName":"read_io_cache_percent","numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"integer","displayAs":"number","visible":true,"order":27,"title":"read_io_cache_percent","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"read_io_cache_percent"},{"fieldName":"from_result_cache","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"boolean","displayAs":"boolean","visible":true,"order":28,"title":"from_result_cache","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"from_result_cache"},{"fieldName":"spilled_local_bytes","numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"integer","displayAs":"number","visible":true,"order":29,"title":"spilled_local_bytes","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"spilled_local_bytes"},{"fieldName":"ReadDataAmountInGB","numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":35,"title":"ReadDataAmountInGB","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"ReadDataAmountInGB"},{"fieldName":"ReadDataFlag","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":36,"title":"ReadDataFlag","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"ReadDataFlag"},{"fieldName":"UsedWorkerTasksFlag","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":37,"title":"UsedWorkerTasksFlag","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"UsedWorkerTasksFlag"},{"fieldName":"LongRunningQueryFlag","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":38,"title":"LongRunningQueryFlag","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"LongRunningQueryFlag"},{"fieldName":"WarehouseAvgTaskToExecutionTimeRatio","numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":39,"title":"WarehouseAvgTaskToExecutionTimeRatio","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"WarehouseAvgTaskToExecutionTimeRatio"},{"fieldName":"CachePercentZScore","numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":47,"title":"CachePercentZScore","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"CachePercentZScore"},{"fieldName":"HasSpillFlag","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":48,"title":"HasSpillFlag","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"HasSpillFlag"},{"fieldName":"UsedCacheFlag","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":53,"title":"UsedCacheFlag","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"UsedCacheFlag"},{"fieldName":"HighDataVolumeFlag","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":54,"title":"HighDataVolumeFlag","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"HighDataVolumeFlag"}]},"invisibleColumns":[{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"QueryEfficiencyRatio","type":"float","displayAs":"number","order":4,"title":"Efficiency Ratio (Experimental)","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"description":"EXPERIMENTAL - Ratio of Execution Time to Total CPU Time (higher is worse)"},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"SpillAmountZScore","type":"float","displayAs":"number","order":6,"title":"SpillAmountZScore","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"DataVolumeZScore","type":"float","displayAs":"number","order":7,"title":"DataVolumeZScore","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"warehouse_id","type":"string","displayAs":"string","order":8,"title":"warehouse_id","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"ProblemQueryMetric","type":"float","displayAs":"number","order":12,"title":"Problem Query Metric (higher is worse","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"description":"Metric that sums up flags such as high volume, spill, query efficiency (the higher the most likely this is an inefficient query","cellFormat":{"default":{"foregroundColor":"#000000"},"rules":[{"if":{"column":"ProblemQueryMetric","fn":">=","literal":"2"},"value":{"foregroundColor":"#E92828"}},{"if":{"column":"ProblemQueryMetric","fn":">=","literal":"1"},"value":{"foregroundColor":"#FB8D3D"}}]}},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"WarehouseAvgQueryRuntime","type":"float","displayAs":"number","order":20,"title":"WarehouseAvgQueryRuntime","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"TotalUsedTimeInWarehouse","type":"float","displayAs":"number","order":30,"title":"TotalUsedTimeInWarehouse","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"TotalStatementTextTimeUsed","type":"float","displayAs":"number","order":31,"title":"TotalStatementTextTimeUsed","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"ProportionOfWarehouseTimeUsedByQuery","type":"float","displayAs":"number","order":32,"title":"ProportionOfWarehouseTimeUsedByQuery","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"WarehouseAvgQueueTime","type":"float","displayAs":"number","order":33,"title":"WarehouseAvgQueueTime","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"WarehouseAvgProportionTimeQueueing","type":"float","displayAs":"number","order":34,"title":"WarehouseAvgProportionTimeQueueing","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"WarehouseAvgReadDataInGBPerQuery","type":"float","displayAs":"number","order":40,"title":"WarehouseAvgReadDataInGBPerQuery","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"WarehouseStdReadDataInGBPerQuery","type":"float","displayAs":"number","order":41,"title":"WarehouseStdReadDataInGBPerQuery","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"WarehouseAvgDeltaCachePercent","type":"float","displayAs":"number","order":42,"title":"WarehouseAvgDeltaCachePercent","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"WarehouseStdDeltaCachePercent","type":"float","displayAs":"number","order":43,"title":"WarehouseStdDeltaCachePercent","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"WarehouseAvgDiskSpillAmount","type":"float","displayAs":"number","order":44,"title":"WarehouseAvgDiskSpillAmount","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"WarehouseStdDiskSpillAmount","type":"float","displayAs":"number","order":45,"title":"WarehouseStdDiskSpillAmount","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"WarehouseAvgQueryEfficiencyRatio","type":"float","displayAs":"number","order":46,"title":"WarehouseAvgQueryEfficiencyRatio","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"Calc_HasSpillFlag","type":"integer","displayAs":"number","order":49,"title":"Calc_HasSpillFlag","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"Calc_ReadDataFlag","type":"decimal","displayAs":"number","order":50,"title":"Calc_ReadDataFlag","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"Calc_UsedWorkerTasksFlag","type":"decimal","displayAs":"number","order":51,"title":"Calc_UsedWorkerTasksFlag","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"Calc_LongRunningQueryFlag","type":"integer","displayAs":"number","order":52,"title":"Calc_LongRunningQueryFlag","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"Calc_HighDataVolumeFlag","type":"integer","displayAs":"number","order":55,"title":"Calc_HighDataVolumeFlag","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"Total_Warehouse_Period_Dollars","type":"float","displayAs":"number","order":56,"title":"Total_Warehouse_Period_Dollars","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"raw_tagged","type":"string","displayAs":"string","order":57,"title":"raw_tagged","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"QueryRuntime_P50","type":"float","displayAs":"number","order":58,"title":"QueryRuntime_P50","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"QueryRuntime_P90","type":"float","displayAs":"number","order":59,"title":"QueryRuntime_P90","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"QueryRuntime_P95","type":"float","displayAs":"number","order":60,"title":"QueryRuntime_P95","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"QueryRuntime_P99","type":"float","displayAs":"number","order":61,"title":"QueryRuntime_P99","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"QueryQueueTime_P50","type":"float","displayAs":"number","order":62,"title":"QueryQueueTime_P50","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"QueryQueueTime_P90","type":"float","displayAs":"number","order":63,"title":"QueryQueueTime_P90","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"QueryQueueTime_P95","type":"float","displayAs":"number","order":64,"title":"QueryQueueTime_P95","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"QueryQueueTime_P99","type":"float","displayAs":"number","order":65,"title":"QueryQueueTime_P99","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"client_application","type":"string","displayAs":"string","order":66,"title":"client_application","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false}],"allowHTMLByDefault":false,"itemsPerPage":25,"paginationSize":"default","condensed":true,"withRowNumber":false,"frame":{"showTitle":true,"showDescription":true,"title":"Query Efficiency Detail","description":"Table-level detailed view of query efficiency along with flags (green = succeed query, red = failed query)"}}},"position":{"x":0,"y":105,"width":6,"height":8}},{"widget":{"name":"75c7a531","queries":[{"name":"main_query","query":{"datasetName":"bd4a1f65","fields":[{"name":"QueryTag","expression":"`QueryTag`"},{"name":"avg(QueryRuntimeSeconds)","expression":"AVG(`QueryRuntimeSeconds`)"},{"name":"hourly(start_time)","expression":"DATE_TRUNC(\"HOUR\", `start_time`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"line","encodings":{"x":{"fieldName":"hourly(start_time)","scale":{"type":"temporal"},"axis":{"title":"Start Time"},"displayName":"Start Time"},"y":{"fieldName":"avg(QueryRuntimeSeconds)","scale":{"type":"quantitative","domain":{"min":0}},"displayName":"Avgerage Runtime (s)"},"color":{"fieldName":"QueryTag","scale":{"type":"categorical"},"displayName":"QueryTag"}},"frame":{"showTitle":true,"title":"Query Runtime Trends"},"mark":{"colors":["#00A972","#FFAB00","#00A972","#FF3621","#8BCAE7","#AB4057","#99DDB4","#FCA4A1","#919191","#BF7080"]}}},"position":{"x":0,"y":43,"width":4,"height":6}},{"widget":{"name":"975d4661","queries":[{"name":"dashboards/01eee4980f461d848d978ef2b00c7f1a/datasets/01eee49819aa10ef846adf03db1ca1e8_HighDataVolumeFlag","query":{"datasetName":"bd4a1f65","fields":[{"name":"HighDataVolumeFlag","expression":"`HighDataVolumeFlag`"},{"name":"HighDataVolumeFlag_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-multi-select","encodings":{"fields":[{"fieldName":"HighDataVolumeFlag","displayName":"HighDataVolumeFlag","queryName":"dashboards/01eee4980f461d848d978ef2b00c7f1a/datasets/01eee49819aa10ef846adf03db1ca1e8_HighDataVolumeFlag"}]},"frame":{"showTitle":true,"title":"High Data Volume Flag"}}},"position":{"x":2,"y":76,"width":1,"height":2}},{"widget":{"name":"95a3a491","queries":[{"name":"dashboards/01ef138d55851eea891925b7c011c764/datasets/01ef138d558a1b6ba3627eef3122be5b_event_minute","query":{"datasetName":"c625c852","fields":[{"name":"event_minute","expression":"`event_minute`"},{"name":"event_minute_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-date-range-picker","encodings":{"fields":[{"fieldName":"event_minute","displayName":"event_minute","queryName":"dashboards/01ef138d55851eea891925b7c011c764/datasets/01ef138d558a1b6ba3627eef3122be5b_event_minute"}]},"frame":{"showTitle":true,"title":"Event Time"}}},"position":{"x":3,"y":22,"width":3,"height":2}},{"widget":{"name":"30b275b4","queries":[{"name":"main_query","query":{"datasetName":"c625c852","fields":[{"name":"max(NumberOfClustersOn)","expression":"MAX(`NumberOfClustersOn`)"},{"name":"minutely(event_minute)","expression":"DATE_TRUNC(\"MINUTE\", `event_minute`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"line","encodings":{"x":{"fieldName":"minutely(event_minute)","scale":{"type":"temporal"},"displayName":"event_minute"},"y":{"fieldName":"max(NumberOfClustersOn)","scale":{"type":"quantitative","domain":{"min":0}},"displayName":"Maximum NumberOfClustersOn"}},"frame":{"showTitle":true,"title":"Warehouse Scaling Over Time"},"mark":{"colors":["#077A9D","#FFAB00","#00A972","#FF3621","#8BCAE7","#AB4057","#99DDB4","#FCA4A1","#919191","#BF7080"]}}},"position":{"x":0,"y":30,"width":6,"height":6}},{"widget":{"name":"140bc9ce","queries":[{"name":"main_query","query":{"datasetName":"bd4a1f65","fields":[{"name":"client_application","expression":"`client_application`"},{"name":"count(*)","expression":"COUNT(`*`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"count(*)","scale":{"type":"quantitative"},"displayName":"Queries"},"y":{"fieldName":"client_application","scale":{"type":"categorical","sort":{"by":"x-reversed"}},"displayName":"Query Source"},"label":{"show":true}},"frame":{"showTitle":true,"title":"Queries By Source App"}}},"position":{"x":0,"y":62,"width":2,"height":7}},{"widget":{"name":"9c59e0ea","queries":[{"name":"main_query","query":{"datasetName":"bd4a1f65","fields":[{"name":"avg(read_io_cache_percent)","expression":"AVG(`read_io_cache_percent`)"},{"name":"hourly(start_time)","expression":"DATE_TRUNC(\"HOUR\", `start_time`)"}],"disaggregated":false}}],"spec":{"version":1,"widgetType":"combo","encodings":{"x":{"fieldName":"hourly(start_time)","scale":{"type":"temporal"},"axis":{"title":"Start Time"},"displayName":"Start Time"},"y":{"primary":{"fields":[{"fieldName":"avg(read_io_cache_percent)","displayName":"Avg % Cache"}]},"secondary":{"fields":[]},"scale":{"type":"quantitative"}}},"mark":{"colors":["#8BCAE7","#FF3621","#8BCAE7","#AB4057","#99DDB4","#FCA4A1","#919191","#BF7080"]},"frame":{"showTitle":true,"title":"Caching Trends","showDescription":true,"description":"Avg %Cache Used in Queries Over Time"}}},"position":{"x":0,"y":69,"width":3,"height":6}},{"widget":{"name":"521550ae","queries":[{"name":"parameter_dashboards/01eee4980f461d848d978ef2b00c7f1a/datasets/01eee49819aa10ef846adf03db1ca1e8_end_range","query":{"datasetName":"bd4a1f65","parameters":[{"name":"end_range","keyword":"end_range"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-date-picker","encodings":{"fields":[{"parameterName":"end_range","queryName":"parameter_dashboards/01eee4980f461d848d978ef2b00c7f1a/datasets/01eee49819aa10ef846adf03db1ca1e8_end_range"}]},"frame":{"showTitle":true,"title":"Query Range End "}}},"position":{"x":5,"y":38,"width":1,"height":2}},{"widget":{"name":"ee7f5325","queries":[{"name":"dashboards/01eee4980f461d848d978ef2b00c7f1a/datasets/01eee49819aa10ef846adf03db1ca1e8_execution_status","query":{"datasetName":"bd4a1f65","fields":[{"name":"execution_status","expression":"`execution_status`"},{"name":"execution_status_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-multi-select","encodings":{"fields":[{"fieldName":"execution_status","displayName":"execution_status","queryName":"dashboards/01eee4980f461d848d978ef2b00c7f1a/datasets/01eee49819aa10ef846adf03db1ca1e8_execution_status"}]},"frame":{"showTitle":true,"title":"Query Status"}}},"position":{"x":2,"y":38,"width":1,"height":2}},{"widget":{"name":"dfda5cc1","queries":[{"name":"main_query","query":{"datasetName":"c625c852","fields":[{"name":"NumberOfClustersOn","expression":"`NumberOfClustersOn`"},{"name":"countdistinct(event_minute)","expression":"COUNT(DISTINCT `event_minute`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"y":{"fieldName":"countdistinct(event_minute)","scale":{"type":"quantitative","reverse":true},"axis":{"title":"Num Minutes On N Clusters"},"displayName":"# Minutes On Cluster N"},"color":{"fieldName":"NumberOfClustersOn","scale":{"type":"quantitative","colorRamp":{"mode":"scheme","scheme":"greenblue"}},"displayName":"# Scaled Clusters"},"label":{"show":true}},"frame":{"showTitle":true,"title":"% of Time Warehouse Scaled at Cluster N"},"mark":{"layout":"percent-stack"}}},"position":{"x":4,"y":24,"width":2,"height":6}},{"widget":{"name":"5084cb76","queries":[{"name":"parameter_dashboards/01eee4980f461d848d978ef2b00c7f1a/datasets/01eee49819aa10ef846adf03db1ca1e8_data_volume_min_z_score","query":{"datasetName":"bd4a1f65","parameters":[{"name":"data_volume_min_z_score","keyword":"data_volume_min_z_score"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"parameterName":"data_volume_min_z_score","queryName":"parameter_dashboards/01eee4980f461d848d978ef2b00c7f1a/datasets/01eee49819aa10ef846adf03db1ca1e8_data_volume_min_z_score"}]},"frame":{"showTitle":true,"title":"Data Volume Z Score Flag (relative volume to others in Warehouse)"}}},"position":{"x":4,"y":76,"width":2,"height":2}},{"widget":{"name":"9ca5f827","queries":[{"name":"parameter_dashboards/01ef138d55851eea891925b7c011c764/datasets/01ef138d5592106eaf12ef004afc3bdd_end_time","query":{"datasetName":"b193d73e","parameters":[{"name":"end_time","keyword":"end_time"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-date-picker","encodings":{"fields":[{"parameterName":"end_time","queryName":"parameter_dashboards/01ef138d55851eea891925b7c011c764/datasets/01ef138d5592106eaf12ef004afc3bdd_end_time"}]},"frame":{"showTitle":true,"title":"Query Range End"}}},"position":{"x":3,"y":115,"width":1,"height":2}},{"widget":{"name":"46d223c3","queries":[{"name":"parameter_dashboards/01eee4980f461d848d978ef2b00c7f1a/datasets/01eeeb8e0410169c9097a20230c52b0d_cluster_unit_price","query":{"datasetName":"b193d73e","parameters":[{"name":"cluster_unit_price","keyword":"cluster_unit_price"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"parameterName":"cluster_unit_price","queryName":"parameter_dashboards/01eee4980f461d848d978ef2b00c7f1a/datasets/01eeeb8e0410169c9097a20230c52b0d_cluster_unit_price"}]},"frame":{"showTitle":true,"title":"Warehouse Unit Price ($)"}}},"position":{"x":1,"y":115,"width":1,"height":2}},{"widget":{"name":"ff4c8e20","queries":[{"name":"main_query","query":{"datasetName":"bd4a1f65","fields":[{"name":"avg(QueryRuntimeSeconds)","expression":"AVG(`QueryRuntimeSeconds`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"avg(QueryRuntimeSeconds)","displayName":"Average QueryRuntimeSeconds"}},"frame":{"showTitle":true,"title":"Avg Query Time (s)"}}},"position":{"x":3,"y":40,"width":1,"height":2}},{"widget":{"name":"27b58522","queries":[{"name":"dashboards/01ef138d55851eea891925b7c011c764/datasets/01ef138d558f1dd1afc1c53a05045ab8_usage_hour","query":{"datasetName":"fea591de","fields":[{"name":"usage_hour","expression":"`usage_hour`"},{"name":"usage_hour_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-date-range-picker","encodings":{"fields":[{"fieldName":"usage_hour","displayName":"usage_hour","queryName":"dashboards/01ef138d55851eea891925b7c011c764/datasets/01ef138d558f1dd1afc1c53a05045ab8_usage_hour"}]},"frame":{"showTitle":true,"title":"Usage Time Period"}}},"position":{"x":2,"y":4,"width":2,"height":2}},{"widget":{"name":"728c3fa9","queries":[{"name":"main_query","query":{"datasetName":"c625c852","fields":[{"name":"avg(NumberOfClustersOn)","expression":"AVG(`NumberOfClustersOn`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"avg(NumberOfClustersOn)","displayName":"Average NumberOfClustersOn"}},"frame":{"showTitle":true,"title":"Avg Scaled Clusters"}}},"position":{"x":1,"y":22,"width":2,"height":2}},{"widget":{"name":"18907719","queries":[{"name":"main_query","query":{"datasetName":"bd4a1f65","fields":[{"name":"HasSpillFlag","expression":"`HasSpillFlag`"},{"name":"count(*)","expression":"COUNT(`*`)"},{"name":"hourly(start_time)","expression":"DATE_TRUNC(\"HOUR\", `start_time`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"hourly(start_time)","scale":{"type":"temporal"},"axis":{"title":"Start Time"},"displayName":"Start Time"},"y":{"fieldName":"count(*)","scale":{"type":"quantitative"},"axis":{"title":"Queries"},"displayName":"Queries"},"color":{"fieldName":"HasSpillFlag","scale":{"type":"categorical","mappings":[{"value":"Used Cache","color":"#00A972"},{"value":"No Cache","color":"#8BCAE7"},{"value":"No Spill","color":"#00A972"}]},"legend":{"position":"bottom"},"displayName":"Has Spill"}},"frame":{"showTitle":true,"title":"Queries With Spill"},"mark":{"layout":"stack"}}},"position":{"x":0,"y":78,"width":3,"height":6}},{"widget":{"name":"2519dba2","queries":[{"name":"dashboards/01eee4980f461d848d978ef2b00c7f1a/datasets/01eee49819aa10ef846adf03db1ca1e8_statement_type","query":{"datasetName":"bd4a1f65","fields":[{"name":"statement_type","expression":"`statement_type`"},{"name":"statement_type_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-multi-select","encodings":{"fields":[{"fieldName":"statement_type","displayName":"statement_type","queryName":"dashboards/01eee4980f461d848d978ef2b00c7f1a/datasets/01eee49819aa10ef846adf03db1ca1e8_statement_type"}]},"frame":{"showTitle":true,"title":"Statement Type"}}},"position":{"x":1,"y":38,"width":1,"height":2}},{"widget":{"name":"0d2ac16e","queries":[{"name":"parameter_dashboards/01eee4980f461d848d978ef2b00c7f1a/datasets/01eeeb8e0410169c9097a20230c52b0d_query_pareto","query":{"datasetName":"b193d73e","parameters":[{"name":"query_pareto","keyword":"query_pareto"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"parameterName":"query_pareto","queryName":"parameter_dashboards/01eee4980f461d848d978ef2b00c7f1a/datasets/01eeeb8e0410169c9097a20230c52b0d_query_pareto"}]},"frame":{"showTitle":true,"showDescription":true,"title":"Query Pareto Point","description":"This is the % of total warehouse time you want to analyze."}}},"position":{"x":4,"y":115,"width":2,"height":2}},{"widget":{"name":"1f757f16","queries":[{"name":"main_query","query":{"datasetName":"bd4a1f65","fields":[{"name":"UsedCacheFlag","expression":"`UsedCacheFlag`"},{"name":"count(*)","expression":"COUNT(`*`)"},{"name":"hourly(start_time)","expression":"DATE_TRUNC(\"HOUR\", `start_time`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"hourly(start_time)","scale":{"type":"temporal"},"axis":{"title":"Start Time"},"displayName":"Start Time"},"y":{"fieldName":"count(*)","scale":{"type":"quantitative"},"axis":{"title":"Queries"},"displayName":"Queries"},"color":{"fieldName":"UsedCacheFlag","scale":{"type":"categorical","mappings":[{"value":"Used Cache","color":"#00A972"},{"value":"No Cache","color":"#8BCAE7"}]},"legend":{"title":"Used Cache","position":"bottom"},"displayName":"Used Cache"}},"frame":{"showTitle":true,"title":"Queries Using Cache"},"mark":{"layout":"stack"}}},"position":{"x":3,"y":84,"width":3,"height":6}},{"widget":{"name":"3edb6d6f","queries":[{"name":"main_query","query":{"datasetName":"bd4a1f65","fields":[{"name":"executed_by","expression":"`executed_by`"},{"name":"sum(ExecutionQueryTime)","expression":"SUM(`ExecutionQueryTime`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"pie","encodings":{"angle":{"fieldName":"sum(ExecutionQueryTime)","scale":{"type":"quantitative"},"axis":{"title":"Total Query Time Share"},"displayName":"Total Query Time Share"},"color":{"fieldName":"executed_by","scale":{"type":"categorical"},"displayName":"executed_by"},"label":{"show":true}},"frame":{"showDescription":true,"description":"Compute Time By User"}}},"position":{"x":2,"y":90,"width":2,"height":7}},{"widget":{"name":"0ece86be","queries":[{"name":"main_query","query":{"datasetName":"b193d73e","fields":[{"name":"QueryTag","expression":"`QueryTag`"},{"name":"sum(StatementTaskTimeProportion)","expression":"SUM(`StatementTaskTimeProportion`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"QueryTag","axis":{"hideLabels":true,"title":"Query Tag"},"scale":{"type":"categorical","sort":{"by":"y-reversed"}},"displayName":"Query Tag"},"y":{"fieldName":"sum(StatementTaskTimeProportion)","scale":{"type":"quantitative"},"displayName":"% of Total Warehouse Compute Time"},"color":{"fieldName":"QueryTag","scale":{"type":"categorical","mappings":[{"value":"Remaining Long Tail of Queries","color":"#919191"},{"value":"Untagged","color":"#039fce"}]},"legend":{"position":"bottom"},"displayName":"Query Tag"},"label":{"show":false}},"frame":{"showTitle":true,"showDescription":true,"title":"Query Warehouse Time By Tag","description":"Query Statement Sorted By % of total warehouse time - i.e. \"How much % of total compute time did query X take up?\""}}},"position":{"x":0,"y":125,"width":6,"height":8}},{"widget":{"name":"20b9381f","textbox_spec":"## Section 1: Warehouse Billing Trends\n-----\nThis section helps users get a simple cost picture for their warehouse over time, as well as obtain a clear picture of momentum of cost over time - which can easily be turned into an alert. "},"position":{"x":0,"y":3,"width":6,"height":1}},{"widget":{"name":"c28db4fe","textbox_spec":"### Query Performance Detail\nThis section drills into details of identifying root causes of poorly performing warehouses down to the query bottlenecks such as spill, high data volume, and long running queries. "},"position":{"x":0,"y":75,"width":6,"height":1}},{"widget":{"name":"fac2fee2","queries":[{"name":"parameter_dashboards/01ef138d55851eea891925b7c011c764/datasets/01ef138d5592106eaf12ef004afc3bdd_start_time","query":{"datasetName":"b193d73e","parameters":[{"name":"start_time","keyword":"start_time"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-date-picker","encodings":{"fields":[{"parameterName":"start_time","queryName":"parameter_dashboards/01ef138d55851eea891925b7c011c764/datasets/01ef138d5592106eaf12ef004afc3bdd_start_time"}]},"frame":{"showTitle":true,"title":"Query Range Start"}}},"position":{"x":2,"y":115,"width":1,"height":2}},{"widget":{"name":"e94a4383","queries":[{"name":"dashboards/01eee4980f461d848d978ef2b00c7f1a/datasets/01eee49819aa10ef846adf03db1ca1e8_HasSpillFlag","query":{"datasetName":"bd4a1f65","fields":[{"name":"HasSpillFlag","expression":"`HasSpillFlag`"},{"name":"HasSpillFlag_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-multi-select","encodings":{"fields":[{"fieldName":"HasSpillFlag","displayName":"HasSpillFlag","queryName":"dashboards/01eee4980f461d848d978ef2b00c7f1a/datasets/01eee49819aa10ef846adf03db1ca1e8_HasSpillFlag"}]},"frame":{"showTitle":true,"title":"Has Spill Flag"}}},"position":{"x":1,"y":76,"width":1,"height":2}},{"widget":{"name":"4fbbdcc6","queries":[{"name":"dashboards/01eee4980f461d848d978ef2b00c7f1a/datasets/01eee49819aa10ef846adf03db1ca1e8_executed_by","query":{"datasetName":"bd4a1f65","fields":[{"name":"executed_by","expression":"`executed_by`"},{"name":"executed_by_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-multi-select","encodings":{"fields":[{"fieldName":"executed_by","displayName":"executed_by","queryName":"dashboards/01eee4980f461d848d978ef2b00c7f1a/datasets/01eee49819aa10ef846adf03db1ca1e8_executed_by"}]},"frame":{"showTitle":true,"title":"Executed By"}}},"position":{"x":3,"y":38,"width":1,"height":2}},{"widget":{"name":"6e5f3162","queries":[{"name":"main_query","query":{"datasetName":"c625c852","fields":[{"name":"NumberOfClustersOn","expression":"`NumberOfClustersOn`"},{"name":"countdistinct(event_minute)","expression":"COUNT(DISTINCT `event_minute`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"NumberOfClustersOn","scale":{"type":"categorical"},"displayName":"# Clusters "},"y":{"fieldName":"countdistinct(event_minute)","scale":{"type":"quantitative"},"axis":{"title":"Num Minutes On N Clusters"},"displayName":"# Minutes On Cluster N"},"color":{"fieldName":"NumberOfClustersOn","scale":{"type":"quantitative","colorRamp":{"mode":"scheme","scheme":"greenblue"}},"displayName":"# Scaled Clusters"}},"frame":{"showTitle":true,"title":"Warehouse Scaling Pattern Histogram"}}},"position":{"x":0,"y":24,"width":4,"height":6}},{"widget":{"name":"8eb5144c","textbox_spec":"#### Warehouse Performance - Query Queue Time\nQuery queue time helps show how long your queries are waiting in the queue to be run. This metric is largely controlled by the concurrency scaling. If your queue times are not meeting your required SLAs, consider increasing the max scaling clusters."},"position":{"x":0,"y":49,"width":6,"height":1}},{"widget":{"name":"7e6127fb","queries":[{"name":"dashboards/01eee4980f461d848d978ef2b00c7f1a/datasets/01eee49819aa10ef846adf03db1ca1e8_LongRunningQueryFlag","query":{"datasetName":"bd4a1f65","fields":[{"name":"LongRunningQueryFlag","expression":"`LongRunningQueryFlag`"},{"name":"LongRunningQueryFlag_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-multi-select","encodings":{"fields":[{"fieldName":"LongRunningQueryFlag","displayName":"LongRunningQueryFlag","queryName":"dashboards/01eee4980f461d848d978ef2b00c7f1a/datasets/01eee49819aa10ef846adf03db1ca1e8_LongRunningQueryFlag"}]},"frame":{"showTitle":true,"title":"Long Query Flag"}}},"position":{"x":0,"y":76,"width":1,"height":2}},{"widget":{"name":"145eaa11","queries":[{"name":"parameter_dashboards/01eee4980f461d848d978ef2b00c7f1a/datasets/01eeeacad13e14ae90b902c6c8537ea0_percent_increase","query":{"datasetName":"fea591de","parameters":[{"name":"percent_increase","keyword":"percent_increase"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"parameterName":"percent_increase","queryName":"parameter_dashboards/01eee4980f461d848d978ef2b00c7f1a/datasets/01eeeacad13e14ae90b902c6c8537ea0_percent_increase"}]},"frame":{"showTitle":true,"title":"High Increase % Barrier"}}},"position":{"x":4,"y":4,"width":1,"height":2}},{"widget":{"name":"284670aa","queries":[{"name":"main_query","query":{"datasetName":"b193d73e","fields":[{"name":"QueryProportionParetoFlag","expression":"`QueryProportionParetoFlag`"},{"name":"sum(StatementTaskTimeProportion)","expression":"SUM(`StatementTaskTimeProportion`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"QueryProportionParetoFlag","axis":{"hideLabels":true,"title":"Query"},"scale":{"type":"categorical","sort":{"by":"y-reversed"}},"displayName":"Query"},"y":{"fieldName":"sum(StatementTaskTimeProportion)","scale":{"type":"quantitative"},"displayName":"% of Total Warehouse Compute Time"},"color":{"fieldName":"QueryProportionParetoFlag","scale":{"type":"categorical","mappings":[{"value":"Remaining Long Tail of Queries","color":"#919191"}]},"legend":{"position":"bottom"},"displayName":"Query Name"},"label":{"show":false}},"frame":{"showTitle":true,"showDescription":true,"title":"Query Resource Allocation Pareto","description":"Query Statement Sorted By % of total warehouse time - i.e. \"How much % of total compute time did query X take up?\""}}},"position":{"x":0,"y":117,"width":6,"height":8}},{"widget":{"name":"9980d69c","queries":[{"name":"parameter_dashboards/01eee4980f461d848d978ef2b00c7f1a/datasets/01eee49819aa10ef846adf03db1ca1e8_start_range","query":{"datasetName":"bd4a1f65","parameters":[{"name":"start_range","keyword":"start_range"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-date-picker","encodings":{"fields":[{"parameterName":"start_range","queryName":"parameter_dashboards/01eee4980f461d848d978ef2b00c7f1a/datasets/01eee49819aa10ef846adf03db1ca1e8_start_range"}]},"frame":{"showTitle":true,"title":"Query Range Start "}}},"position":{"x":4,"y":38,"width":1,"height":2}},{"widget":{"name":"23af6af1","queries":[{"name":"parameter_dashboards/01eee4980f461d848d978ef2b00c7f1a/datasets/01eee49819aa10ef846adf03db1ca1e8_warehouse_id","query":{"datasetName":"bd4a1f65","parameters":[{"name":"warehouse_id","keyword":"warehouse_id"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"parameterName":"warehouse_id","queryName":"parameter_dashboards/01eee4980f461d848d978ef2b00c7f1a/datasets/01eee49819aa10ef846adf03db1ca1e8_warehouse_id"}]},"frame":{"showTitle":true,"title":"Warehouse"}}},"position":{"x":0,"y":38,"width":1,"height":2}},{"widget":{"name":"12c7fc1c","textbox_spec":"# DBSQL Warehouse Advisor\n\n## Sections\n1. Warehouse General Intel - show basic billing usage and cost metrics for a warehouse (dbus, $, over time)\n2. Warehouse Scaling Intel - shows basic scaling metrics per warehouse (scaling history, avg scale (weighted))\n3. Query Tuning Advisor - Show common query history metrics such as runtime, queue time, failure rate, cache %, etc., identify inefficient queries with skew/spill indicators\n4. Query Statement Level Resource Allocation Advisor - Identify and allocate warehouse total used time by statement and query (optionally include and aggregate by TAG)"},"position":{"x":0,"y":0,"width":6,"height":3}},{"widget":{"name":"bc10a01f","textbox_spec":"## Section 3: Query Performance Analysis\n-----\nThis section helps dive into warehouse performance to understand how well the warehouse is performing against SLAs, identifying bottlenecks, as well as queries that are taking up the majority of the resources."},"position":{"x":0,"y":36,"width":6,"height":2}},{"widget":{"name":"462da604","queries":[{"name":"parameter_dashboards/01eee4980f461d848d978ef2b00c7f1a/datasets/01eeeb8e0410169c9097a20230c52b0d_warehouse_id","query":{"datasetName":"b193d73e","parameters":[{"name":"warehouse_id","keyword":"warehouse_id"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"parameterName":"warehouse_id","queryName":"parameter_dashboards/01eee4980f461d848d978ef2b00c7f1a/datasets/01eeeb8e0410169c9097a20230c52b0d_warehouse_id"}]},"frame":{"showTitle":true,"title":"Warehouse Id"}}},"position":{"x":0,"y":115,"width":1,"height":2}},{"widget":{"name":"405dd989","queries":[{"name":"dashboards/01eee4980f461d848d978ef2b00c7f1a/datasets/01eee49819aa10ef846adf03db1ca1e8_QueryTag","query":{"datasetName":"bd4a1f65","fields":[{"name":"QueryTag","expression":"`QueryTag`"},{"name":"QueryTag_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-multi-select","encodings":{"fields":[{"fieldName":"QueryTag","displayName":"QueryTag","queryName":"dashboards/01eee4980f461d848d978ef2b00c7f1a/datasets/01eee49819aa10ef846adf03db1ca1e8_QueryTag"}]},"frame":{"showTitle":true,"title":"Query Tag"}}},"position":{"x":0,"y":40,"width":1,"height":2}},{"widget":{"name":"31fd7436","textbox_spec":"## Section 4 - Query Resource Allocation Advisor\n-----\nThis section helps to allocate query runtime cost across the warehouse down to the query level. The first visual is a pareto analysis that shows which queries take up the top X% of the warehouse total runtime. "},"position":{"x":0,"y":113,"width":6,"height":2}},{"widget":{"name":"450f3ead","queries":[{"name":"main_query","query":{"datasetName":"b193d73e","fields":[{"name":"QueryTag","expression":"`QueryTag`"},{"name":"statement_text","expression":"`statement_text`"},{"name":"StatementAllocatedDollars","expression":"`StatementAllocatedDollars`"},{"name":"StatementAllocatedDBUs","expression":"`StatementAllocatedDBUs`"},{"name":"StatementWarehouseTimePercentage","expression":"`StatementWarehouseTimePercentage`"},{"name":"NumberOfExecutions","expression":"`NumberOfExecutions`"},{"name":"AvgRuntimeInSeconds","expression":"`AvgRuntimeInSeconds`"},{"name":"UserRunCounts","expression":"`UserRunCounts`"},{"name":"TotalStatementTimeUsed","expression":"`TotalStatementTimeUsed`"},{"name":"QueryProportionParetoFlag","expression":"`QueryProportionParetoFlag`"}],"disaggregated":true}}],"spec":{"version":1,"widgetType":"table","encodings":{"columns":[{"fieldName":"QueryTag","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":0,"title":"QueryTag","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"QueryTag"},{"fieldName":"statement_text","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":1,"title":"Query","allowSearch":true,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"cellFormat":{"default":{"foregroundColor":null},"rules":[{"if":{"column":"QueryProportionParetoFlag","fn":"!=","literal":"Remaining Long Tail of Queries"},"value":{"foregroundColor":"#E92828"}}]},"displayName":"statement_text"},{"fieldName":"StatementAllocatedDollars","numberFormat":"$0.0000","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":2,"title":"Allocated Cost ($)","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"cellFormat":{"default":{"foregroundColor":"#0b8536"},"rules":[]},"displayName":"StatementAllocatedDollars"},{"fieldName":"StatementAllocatedDBUs","numberFormat":"0.0000","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":3,"title":"Allocated DBUs","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"StatementAllocatedDBUs"},{"fieldName":"StatementWarehouseTimePercentage","numberFormat":"%0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":4,"title":"% of Warehouse Execution Time","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"cellFormat":{"default":{"foregroundColor":"#356AFF"},"rules":[]},"displayName":"StatementWarehouseTimePercentage"},{"fieldName":"NumberOfExecutions","numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"integer","displayAs":"number","visible":true,"order":5,"title":"# Executions","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"NumberOfExecutions"},{"fieldName":"AvgRuntimeInSeconds","numberFormat":"0.0000","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":6,"title":"Avg Runtime (s)","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"cellFormat":{"default":{"foregroundColor":"#356AFF"},"rules":[]},"displayName":"AvgRuntimeInSeconds"},{"fieldName":"UserRunCounts","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"complex","displayAs":"json","visible":true,"order":7,"title":"User Run Breakdown","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"description":"Shows a detailed list of the users that executed this query and how often","displayName":"UserRunCounts"},{"fieldName":"TotalStatementTimeUsed","numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":9,"title":"TotalStatementTimeUsed","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"cellFormat":{"default":{"foregroundColor":"#356AFF"},"rules":[]},"displayName":"TotalStatementTimeUsed"}]},"invisibleColumns":[{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"TotalWarehouseTimeUsed","type":"float","displayAs":"number","order":8,"title":"TotalWarehouseTimeUsed","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"%0.0000","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"StatementTaskTimeProportion","type":"float","displayAs":"number","order":10,"title":"StatementTaskTimeProportion","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"cellFormat":{"default":{"foregroundColor":"#002FB4"},"rules":[]}},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"CumulativeProportionOfWarehouseTime","type":"float","displayAs":"number","order":11,"title":"CumulativeProportionOfWarehouseTime","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"QueryProportionParetoFlag","type":"string","displayAs":"string","order":12,"title":"QueryProportionParetoFlag","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"Total_Warehouse_Period_DBUs","type":"float","displayAs":"number","order":13,"title":"Total_Warehouse_Period_DBUs","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"Total_Warehouse_Period_Dollars","type":"float","displayAs":"number","order":14,"title":"Total_Warehouse_Period_Dollars","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"query_signature","type":"string","displayAs":"string","order":15,"title":"query_signature","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"raw_tagged","type":"string","displayAs":"string","order":16,"title":"raw_tagged","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"statetment_type","type":"string","displayAs":"string","order":100002,"title":"statetment_type","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false}],"allowHTMLByDefault":false,"itemsPerPage":25,"paginationSize":"default","condensed":true,"withRowNumber":false,"frame":{"showTitle":true,"showDescription":true,"title":"Query Statement Resource Allocation Detail","description":"Pareto Analysis Detail (Red means it is a top query in the Pareto Analysis)\n+ you can get user level query execution details by scrolling this table -->"}}},"position":{"x":0,"y":133,"width":6,"height":9}},{"widget":{"name":"a025826c","queries":[{"name":"main_query","query":{"datasetName":"bd4a1f65","fields":[{"name":"avg(QueryRuntime_P50)","expression":"AVG(`QueryRuntime_P50`)"},{"name":"avg(QueryRuntime_P90)","expression":"AVG(`QueryRuntime_P90`)"},{"name":"avg(QueryRuntime_P95)","expression":"AVG(`QueryRuntime_P95`)"},{"name":"avg(QueryRuntime_P99)","expression":"AVG(`QueryRuntime_P99`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"scale":{"type":"quantitative","reverse":false},"fields":[{"fieldName":"avg(QueryRuntime_P50)","displayName":"P50"},{"fieldName":"avg(QueryRuntime_P90)","displayName":"P90"},{"fieldName":"avg(QueryRuntime_P95)","displayName":"P95"},{"fieldName":"avg(QueryRuntime_P99)","displayName":"P99"}],"axis":{"title":"Query Runtime (s)"}},"label":{"show":false}},"frame":{"showTitle":true,"title":"Query Runtime P50, 90, 95, 99"},"mark":{"layout":"group","colors":["#8BCAE7","#2672cb","#00A972","#FF3621","#8BCAE7","#AB4057","#99DDB4","#FCA4A1","#919191","#BF7080"]}}},"position":{"x":4,"y":43,"width":2,"height":6}},{"widget":{"name":"c325ac2b","textbox_spec":"## Section 2: Warehouse Scaling Trends\n-----\nThis sections simplifies trying to understand how well your warehouse scales as well as helps users project long term costs of spiky workloads more accurately. It pivots the real-time concurrency scaling chart and shows generally how much time and what % of time the warehouse was scaled up to each concurrency level. This can help guage scaling efficiency over time in production as well. "},"position":{"x":0,"y":20,"width":6,"height":2}},{"widget":{"name":"ade3db3f","queries":[{"name":"main_query","query":{"datasetName":"bd4a1f65","fields":[{"name":"count(*)","expression":"COUNT(`*`)"},{"name":"countdistinct(executed_by)","expression":"COUNT(DISTINCT `executed_by`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"count(*)","displayName":"Count of Records"},"target":{"fieldName":"countdistinct(executed_by)","displayName":"Count of Unique executed_by"}},"frame":{"showTitle":true,"title":"Query Count","showDescription":true,"description":"# users"}}},"position":{"x":2,"y":40,"width":1,"height":2}},{"widget":{"name":"ad3186b3","queries":[{"name":"main_query","query":{"datasetName":"bd4a1f65","fields":[{"name":"count(*)","expression":"COUNT(`*`)"},{"name":"hourly(start_time)","expression":"DATE_TRUNC(\"HOUR\", `start_time`)"},{"name":"statement_type","expression":"`statement_type`"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"area","encodings":{"x":{"fieldName":"hourly(start_time)","scale":{"type":"temporal"},"axis":{"title":"Start Time"},"displayName":"Start Time"},"y":{"fieldName":"count(*)","scale":{"type":"quantitative"},"displayName":"Query Count"},"color":{"fieldName":"statement_type","scale":{"type":"categorical"},"legend":{"position":"bottom"},"displayName":"Statement Type"},"label":{"show":false}},"frame":{"showDescription":false,"description":"Query Count By Statement Type Over Time","showTitle":true,"title":"Queries By Statement Type Over Time"}}},"position":{"x":4,"y":62,"width":2,"height":7}},{"widget":{"name":"28d29f2d","queries":[{"name":"main_query","query":{"datasetName":"bd4a1f65","fields":[{"name":"avg(QueueQueryTime)","expression":"AVG(`QueueQueryTime`)"},{"name":"hourly(start_time)","expression":"DATE_TRUNC(\"HOUR\", `start_time`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"line","encodings":{"x":{"fieldName":"hourly(start_time)","scale":{"type":"temporal"},"axis":{"title":"Start Time"},"displayName":"Start Time"},"y":{"fieldName":"avg(QueueQueryTime)","scale":{"type":"quantitative"},"displayName":"Avg Query Queue Time (s)"}},"frame":{"showTitle":true,"title":"Queue Time Trends"}}},"position":{"x":0,"y":50,"width":4,"height":6}},{"widget":{"name":"e9aa25d6","queries":[{"name":"main_query","query":{"datasetName":"bd4a1f65","fields":[{"name":"avg(QueryRuntimeSeconds)","expression":"AVG(`QueryRuntimeSeconds`)"},{"name":"execution_status","expression":"`execution_status`"},{"name":"statement_type","expression":"`statement_type`"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"execution_status","scale":{"type":"categorical"},"displayName":"Execution Status"},"y":{"fieldName":"statement_type","scale":{"type":"categorical"},"displayName":"Statement Type"},"color":{"fieldName":"avg(QueryRuntimeSeconds)","scale":{"type":"quantitative","colorRamp":{"mode":"scheme","scheme":"greenblue"}},"displayName":"Avg Query Runtime"}},"frame":{"showTitle":true,"title":"Query Runtime By Statement Type, Status"}}},"position":{"x":3,"y":56,"width":3,"height":6}},{"widget":{"name":"fe825ce8","queries":[{"name":"main_query","query":{"datasetName":"bd4a1f65","fields":[{"name":"executed_by","expression":"`executed_by`"},{"name":"sum(AllocatedQueryCostByTime)","expression":"SUM(`AllocatedQueryCostByTime`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"pie","encodings":{"angle":{"fieldName":"sum(AllocatedQueryCostByTime)","scale":{"type":"quantitative"},"axis":{"title":"Total Allocated Cost By User ($)"},"displayName":"Query $ Allocated Cost"},"color":{"fieldName":"executed_by","scale":{"type":"categorical"},"displayName":"executed_by"},"label":{"show":true}},"frame":{"showDescription":true,"description":"Allocated Query Cost By User"}}},"position":{"x":4,"y":90,"width":2,"height":7}},{"widget":{"name":"c0b14f2e","queries":[{"name":"main_query","query":{"datasetName":"fea591de","fields":[{"name":"daily(usage_hour)","expression":"DATE_TRUNC(\"DAY\", `usage_hour`)"},{"name":"sum(UsageDollars)","expression":"SUM(`UsageDollars`)"},{"name":"sum(UsageDBUs)","expression":"SUM(`UsageDBUs`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"daily(usage_hour)","scale":{"type":"temporal"},"axis":{"title":"Usage Hour"},"displayName":"Usage Hour"},"y":{"axis":{"title":"Usage Amount ($ or DBUs"},"scale":{"type":"quantitative"},"fields":[{"fieldName":"sum(UsageDollars)","displayName":"Usage $ DBUs"},{"fieldName":"sum(UsageDBUs)","displayName":"Usage DBUs"}]},"color":{"legend":{"title":"Usage Type","position":"bottom"}},"label":{"show":true}},"frame":{"showTitle":true,"title":"Warehouse Billing Over Time"},"mark":{"colors":["#2672cb","#00A972","#FF3621","#8BCAE7","#AB4057","#99DDB4","#FCA4A1","#919191","#BF7080"],"layout":"group"}}},"position":{"x":0,"y":6,"width":6,"height":7}},{"widget":{"name":"49f44d6b","queries":[{"name":"main_query","query":{"datasetName":"bd4a1f65","fields":[{"name":"sum(QueryRuntimeSeconds)","expression":"SUM(`QueryRuntimeSeconds`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"sum(QueryRuntimeSeconds)","displayName":"Sum of QueryRuntimeSeconds"}},"frame":{"showTitle":true,"title":"Total Query Time (s)","showDescription":true,"description":"Excludes metadata ops"}}},"position":{"x":5,"y":40,"width":1,"height":2}},{"widget":{"name":"c157ac20","queries":[{"name":"main_query","query":{"datasetName":"bd4a1f65","fields":[{"name":"LongRunningQueryFlag","expression":"`LongRunningQueryFlag`"},{"name":"count(*)","expression":"COUNT(`*`)"},{"name":"hourly(start_time)","expression":"DATE_TRUNC(\"HOUR\", `start_time`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"hourly(start_time)","scale":{"type":"temporal"},"axis":{"title":"Start Time"},"displayName":"Start Time"},"y":{"fieldName":"count(*)","scale":{"type":"quantitative"},"axis":{"title":"Queries"},"displayName":"Queries"},"color":{"fieldName":"LongRunningQueryFlag","scale":{"type":"categorical","mappings":[{"value":"Used Cache","color":"#00A972"},{"value":"No Cache","color":"#8BCAE7"},{"value":"Short Running","color":"#00A972"},{"value":"Long Running","color":"#FFAB00"}]},"legend":{"position":"bottom"},"displayName":"Query Length"}},"frame":{"showTitle":true,"title":"Queries Long Running"},"mark":{"layout":"stack"}}},"position":{"x":3,"y":78,"width":3,"height":6}},{"widget":{"name":"99ee6253","queries":[{"name":"main_query","query":{"datasetName":"bd4a1f65","fields":[{"name":"count(*)","expression":"COUNT(`*`)"},{"name":"execution_status","expression":"`execution_status`"},{"name":"hourly(start_time)","expression":"DATE_TRUNC(\"HOUR\", `start_time`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"area","encodings":{"x":{"fieldName":"hourly(start_time)","scale":{"type":"temporal"},"axis":{"title":"Start Time"},"displayName":"Start Time"},"y":{"fieldName":"count(*)","scale":{"type":"quantitative"},"axis":{"title":"Query Count"},"displayName":"Query Count"},"color":{"fieldName":"execution_status","scale":{"type":"categorical","mappings":[{"value":"FAILED","color":"#FF3621"},{"value":"FINISHED","color":"#00A972"},{"value":"CANCELED","color":"#919191"}]},"legend":{"title":"Execution Status","position":"bottom"},"displayName":"Execution Status"}},"frame":{"showTitle":true,"title":"Queries by Status Over Time"}}},"position":{"x":2,"y":62,"width":2,"height":7}},{"widget":{"name":"948c6b61","queries":[{"name":"parameter_dashboards/01eee4980f461d848d978ef2b00c7f1a/datasets/01eeeacee7a719909f9b3d31305cc095_warehouse_id","query":{"datasetName":"c625c852","parameters":[{"name":"warehouse_id","keyword":"warehouse_id"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"parameterName":"warehouse_id","queryName":"parameter_dashboards/01eee4980f461d848d978ef2b00c7f1a/datasets/01eeeacee7a719909f9b3d31305cc095_warehouse_id"}]},"frame":{"showTitle":true,"title":"Warehouse Id"}}},"position":{"x":0,"y":22,"width":1,"height":2}},{"widget":{"name":"512d54cf","queries":[{"name":"main_query","query":{"datasetName":"bd4a1f65","fields":[{"name":"QueryTag","expression":"`QueryTag`"},{"name":"sum(ExecutionQueryTime)","expression":"SUM(`ExecutionQueryTime`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"sum(ExecutionQueryTime)","scale":{"type":"quantitative"},"displayName":"Query Execution Time (s)"},"y":{"fieldName":"QueryTag","scale":{"type":"categorical","sort":{"by":"x-reversed"}},"displayName":"QueryTag"}},"frame":{"showTitle":true,"title":"Allocated Query Cost By Tag"}}},"position":{"x":2,"y":97,"width":2,"height":8}},{"widget":{"name":"8938ed9b","queries":[{"name":"main_query","query":{"datasetName":"bd4a1f65","fields":[{"name":"QueryTag","expression":"`QueryTag`"},{"name":"sum(AllocatedQueryCostByTime)","expression":"SUM(`AllocatedQueryCostByTime`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"sum(AllocatedQueryCostByTime)","scale":{"type":"quantitative"},"displayName":"Allocated Query Cost"},"y":{"fieldName":"QueryTag","scale":{"type":"categorical","sort":{"by":"x-reversed"}},"displayName":"QueryTag"}},"frame":{"showTitle":true,"title":"Allocated Query Cost By Tag"}}},"position":{"x":0,"y":97,"width":2,"height":8}},{"widget":{"name":"a6b4c49c","queries":[{"name":"parameter_dashboards/01eee4980f461d848d978ef2b00c7f1a/datasets/01eee49819aa10ef846adf03db1ca1e8_long_running_seconds_treshold","query":{"datasetName":"bd4a1f65","parameters":[{"name":"long_running_seconds_treshold","keyword":"long_running_seconds_treshold"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"parameterName":"long_running_seconds_treshold","queryName":"parameter_dashboards/01eee4980f461d848d978ef2b00c7f1a/datasets/01eee49819aa10ef846adf03db1ca1e8_long_running_seconds_treshold"}]},"frame":{"showTitle":true,"title":"Long Running Query Threshold (s) For Flag"}}},"position":{"x":3,"y":76,"width":1,"height":2}},{"widget":{"name":"46c7f1f6","queries":[{"name":"main_query","query":{"datasetName":"bd4a1f65","fields":[{"name":"QueryTag","expression":"`QueryTag`"},{"name":"count(*)","expression":"COUNT(`*`)"},{"name":"hourly(start_time)","expression":"DATE_TRUNC(\"HOUR\", `start_time`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"hourly(start_time)","scale":{"type":"temporal"},"axis":{"title":"Start Time"},"displayName":"Start Time"},"y":{"fieldName":"count(*)","scale":{"type":"quantitative"},"displayName":"Queries"},"color":{"fieldName":"QueryTag","scale":{"type":"categorical"},"displayName":"QueryTag"}},"frame":{"showTitle":true,"title":"Queries Over Time By Tag"}}},"position":{"x":4,"y":97,"width":2,"height":8}},{"widget":{"name":"da8f5621","queries":[{"name":"main_query","query":{"datasetName":"fea591de","fields":[{"name":"HighIncreaseFlag","expression":"`HighIncreaseFlag`"},{"name":"usage_hour","expression":"`usage_hour`"},{"name":"sum(p24h_change_percentage)","expression":"SUM(`p24h_change_percentage`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"usage_hour","scale":{"type":"temporal"},"axis":{"title":"Usage Hour"},"displayName":"Usage Hour"},"y":{"fieldName":"sum(p24h_change_percentage)","scale":{"type":"quantitative"},"axis":{"title":"12 Hour Moving Average PoP"},"displayName":"12 Hour Moving Average PoP"},"color":{"fieldName":"HighIncreaseFlag","scale":{"type":"categorical","mappings":[{"value":1,"color":"#FF3621"},{"value":0,"color":"#2672cb"},{"value":"High Momentum","color":"#FF3621"},{"value":"Within Range","color":"#2672cb"}]},"legend":{"title":"Has High Increase?","position":"bottom"},"displayName":"Has High Increase?"}},"frame":{"showTitle":true,"title":"Warehouse Momentum Alert Indicator","showDescription":true,"description":"Popular Alerting Mechanism for identifying when warehouse usage (24 hour rolling) increase X%"}}},"position":{"x":0,"y":13,"width":6,"height":7}},{"widget":{"name":"b6eb2a82","queries":[{"name":"dashboards/01eee4980f461d848d978ef2b00c7f1a/datasets/01eee49819aa10ef846adf03db1ca1e8_client_application","query":{"datasetName":"bd4a1f65","fields":[{"name":"client_application","expression":"`client_application`"},{"name":"client_application_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-multi-select","encodings":{"fields":[{"fieldName":"client_application","displayName":"client_application","queryName":"dashboards/01eee4980f461d848d978ef2b00c7f1a/datasets/01eee49819aa10ef846adf03db1ca1e8_client_application"}]},"frame":{"showTitle":true,"title":"Query Source App"}}},"position":{"x":1,"y":40,"width":1,"height":2}},{"widget":{"name":"e2aac8d6","queries":[{"name":"main_query","query":{"datasetName":"bd4a1f65","fields":[{"name":"avg(QueryQueueTime_P50)","expression":"AVG(`QueryQueueTime_P50`)"},{"name":"avg(QueryQueueTime_P90)","expression":"AVG(`QueryQueueTime_P90`)"},{"name":"avg(QueryQueueTime_P95)","expression":"AVG(`QueryQueueTime_P95`)"},{"name":"avg(QueryQueueTime_P99)","expression":"AVG(`QueryQueueTime_P99`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"scale":{"type":"quantitative","reverse":false},"fields":[{"fieldName":"avg(QueryQueueTime_P50)","displayName":"P50"},{"fieldName":"avg(QueryQueueTime_P90)","displayName":"P90"},{"fieldName":"avg(QueryQueueTime_P95)","displayName":"P95"},{"fieldName":"avg(QueryQueueTime_P99)","displayName":"P99"}],"axis":{"title":"Query Queue Time (s)"}},"label":{"show":false}},"frame":{"showTitle":true,"title":"Query Queue Time P50, 90, 95, 99"},"mark":{"layout":"group","colors":["#8BCAE7","#2672cb","#00A972","#FF3621","#8BCAE7","#AB4057","#99DDB4","#FCA4A1","#919191","#BF7080"]}}},"position":{"x":4,"y":50,"width":2,"height":6}},{"widget":{"name":"1f622df9","queries":[{"name":"main_query","query":{"datasetName":"bd4a1f65","fields":[{"name":"avg(AllocatedQueryCostByTime)","expression":"AVG(`AllocatedQueryCostByTime`)"},{"name":"hourly(start_time)","expression":"DATE_TRUNC(\"HOUR\", `start_time`)"}],"disaggregated":false}}],"spec":{"version":1,"widgetType":"combo","encodings":{"y":{"primary":{"fields":[{"fieldName":"avg(AllocatedQueryCostByTime)","displayName":"Avg Cost Per Query"}]},"secondary":{"fields":[]},"scale":{"type":"quantitative"},"axis":{"title":"Avg Cost Per Query ($)"}},"color":{"legend":{"position":"bottom"}},"x":{"fieldName":"hourly(start_time)","scale":{"type":"temporal"},"axis":{"title":"Start Time"},"displayName":"Start Time"}},"mark":{"colors":["#99DDB4","#FCA4A1","#919191","#BF7080"]},"frame":{"showTitle":true,"title":"Cost Per Query Over Time","showDescription":true,"description":"Query Avg Allocated Cost Over Time (By Execution Time)"}}},"position":{"x":3,"y":69,"width":3,"height":6}},{"widget":{"name":"6fee4f79","queries":[{"name":"main_query","query":{"datasetName":"bd4a1f65","fields":[{"name":"count(*)","expression":"COUNT(`*`)"},{"name":"executed_by","expression":"`executed_by`"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"pie","encodings":{"angle":{"fieldName":"count(*)","scale":{"type":"quantitative"},"displayName":"Count of Records"},"color":{"fieldName":"executed_by","scale":{"type":"categorical"},"displayName":"executed_by"},"label":{"show":true}},"frame":{"showDescription":true,"description":"Query Count By User"}}},"position":{"x":0,"y":90,"width":2,"height":7}},{"widget":{"name":"bbbc5770","queries":[{"name":"main_query","query":{"datasetName":"bd4a1f65","fields":[{"name":"QueryTag","expression":"`QueryTag`"},{"name":"avg(QueryRuntimeSeconds)","expression":"AVG(`QueryRuntimeSeconds`)"},{"name":"execution_status","expression":"`execution_status`"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"heatmap","encodings":{"x":{"fieldName":"execution_status","scale":{"type":"categorical"},"displayName":"Execution Status"},"y":{"fieldName":"QueryTag","scale":{"type":"categorical"},"displayName":"Query Tag"},"color":{"fieldName":"avg(QueryRuntimeSeconds)","scale":{"type":"quantitative","colorRamp":{"mode":"scheme","scheme":"greenblue"}},"displayName":"Avg Query Runtime"}},"frame":{"showTitle":true,"title":"Query Runtime By Tag, Execution Status"}}},"position":{"x":0,"y":56,"width":3,"height":6}},{"widget":{"name":"5ffe9d32","textbox_spec":"#### Warehouse Performance - Query Runtime\nQuery runtime helps identify if your warehouse is meeting your SLAs. The runtime is generally controlled by the size of the warehouse. So if your queries are running slower than your desired SLA, try increasing the warehouse T-shirt size. "},"position":{"x":0,"y":42,"width":6,"height":1}},{"widget":{"name":"2b07c111","queries":[{"name":"main_query","query":{"datasetName":"fea591de","fields":[{"name":"sum(UsageDBUs)","expression":"SUM(`UsageDBUs`)"},{"name":"sum(UsageDollars)","expression":"SUM(`UsageDollars`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"sum(UsageDollars)","displayName":"Sum of UsageDollars"},"target":{"fieldName":"sum(UsageDBUs)","displayName":"Sum of UsageDBUs"}},"frame":{"showTitle":true,"title":"$ Spend In Period","showDescription":true,"description":"(DBUs)"}}},"position":{"x":5,"y":4,"width":1,"height":2}},{"widget":{"name":"452debb9","queries":[{"name":"parameter_dashboards/01eee4980f461d848d978ef2b00c7f1a/datasets/01eeeacad13e14ae90b902c6c8537ea0_warehouse_id","query":{"datasetName":"fea591de","parameters":[{"name":"warehouse_id","keyword":"warehouse_id"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"parameterName":"warehouse_id","queryName":"parameter_dashboards/01eee4980f461d848d978ef2b00c7f1a/datasets/01eeeacad13e14ae90b902c6c8537ea0_warehouse_id"}]},"frame":{"showTitle":true,"title":"Warehouse Id"}}},"position":{"x":0,"y":4,"width":1,"height":2}}]}]}